<html>
<head>
<title>빼빼로 줍기</title>
<style>
	* {
		text-align: center;
		margin: 0;
		padding: 0;
	}
	table {
		width: 100%;
		height: 50%;
		border: 1 solid black;
	}
	td {
		text-align: center;
		vertical-align: middle;
	}
	img {
		position: relative;
		width: 50%;
		height: 50%;
	}
</style>
<script>
	let Q = (x, y=document) => y.querySelector(x);
	let QQ = (x, y=document) => [...y.querySelectorAll(x)];
	let ranz = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
	srcs = [
		null,
		"https://cdn.icon-icons.com/icons2/2699/PNG/512/netflix_logo_icon_170919.png",
		"https://cdn.icon-icons.com/icons2/2699/PNG/512/minecraft_logo_icon_168974.png",
		"https://cdn.icon-icons.com/icons2/2699/PNG/512/youtube_logo_icon_168737.png",
		"https://cdn.icon-icons.com/icons2/2699/PNG/512/servicenow_logo_icon_168835.png"
		];
	state = [[ [3,20], [1,20], [3,20], [3,20] ],
			 [ [4,20], [4,20], [0,20], [1,20] ],
			 [ [2,20], [0,20], [1,20], [0,20] ],
			 [ [0,20], [3,20], [4,20], [3,20] ],
			 [ [4,20], [2,20], [3,20], [2,20] ]]
	window.addEventListener('DOMContentLoaded',	main);
	function main()
	{
		render(state);
	}
	function render(arr)
	{
		table = document.createElement('table');
		arr.forEach((row, i) => {
			tr = document.createElement('tr');
			row.forEach((col, j) => {
				td = document.createElement('td');
				item = arr[i][j][0];
				img = document.createElement('img');
				img.src = (item > 0) ? srcs[ item ] : '';
				life = arr[i][j][1];
				img.style.opacity =	(life < 10) ? 0 : 1;
				img.style.top =	(life < 10) ? (20 - life) : 0;
				td.appendChild(img);
				tr.appendChild(td);
			})
			table.appendChild(tr);
		})
		if (Q('table')) Q('table').remove();
		Q('body').appendChild( table );
	}
	function next()
	{
		state = state.map((row,i) =>
			row.map((col,j) =>
				state[i][j][1] > 0
					? [state[i][j][0], state[i][j][1] - 1]
					: [ranz(0,4), 20]
			)
		);
		render(state);
	}
</script>
</head>
<body>
    <input type="button" value="다음 프레임" onclick="next()"></input>
</body>
</html>