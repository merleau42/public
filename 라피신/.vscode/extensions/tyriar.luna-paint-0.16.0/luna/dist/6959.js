"use strict";const a5_0x129e=["paletteColorCount"," !== ","-bit)","image","then","severity","byteLength","BITMAPINFOHEADER color plane count must be 1","isArray","readyPromise","all","Ico signature is not correct (","Unexpected .bmp header size (","byteOffset","map","set","Offset (","Assertion failure: ","dataOffset","Unsupported .ico image entry color depth (","subarray","headerSize","101JcMsyr","error","toBGRA","getUint16","pow","_offset","Not enough pixel data (",") and BMP pixel data don`t have matching dimensions ("," failed to decode as bmp: ","841940zfnJyP","Not enough bytes in file for png signature (","byteSize",") to decode image, expected ","from","Error","dataSize","get","-bit), attempting to proceed with a value of 0","mimeType","_data","15161goLEly","resource","1231901rbYksC","webpackChunkluna","3inlndm","getUint8","4081Boyzby","bitmapHeight",'Unexpected bitmap type "',"Invalid .ico image entry (index ","slice","1140984CUuMpd","image/png","364163biPAuh","fromCharCode","message","colorCount","112DGxMVd","toRGBA","_colorCount","Warning","image/bmp","width","data","padStart","isReady","Problems parsing file:","bitness","setUint16","info","Cannot parse bitmap DIB header of size "," yet","225007KAOWlD","getUint32",") was not expected value of ","length","warn","join","push","bitsPerPixel","buffer","bitmapWidth","lambda ","floor","height"],a5_0x3fd8=function(t,e){return a5_0x129e[t-=229]},a5_0xf5b30e=a5_0x3fd8;!function(t,e){const n=a5_0x3fd8;for(;;)try{if(860740===parseInt(n(295))+-parseInt(n(265))+-parseInt(n(274))+parseInt(n(252))+parseInt(n(243))*parseInt(n(263))+-parseInt(n(269))*parseInt(n(280))+-parseInt(n(276))*-parseInt(n(267)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a5_0x129e),(self[a5_0xf5b30e(266)]=self.webpackChunkluna||[])[a5_0xf5b30e(301)]([[6959],{9094:(t,e,n)=>{var i,o;n.d(e,{P:()=>i,V:()=>o}),(i||(i={}))[a5_0x3fd8(281)]=function(t,e){let n=0;const i=4*e;for(let e=0;e<i;e+=4)n=t[e],t[e]=t[e+2],t[e+2]=n},(o||(o={}))[a5_0x3fd8(245)]=function(t,e){return i[a5_0x3fd8(281)](t,e)}},4085:(t,e,n)=>{function i(t,e){return Math.ceil(t/e)*e}n.d(e,{g:()=>i})},6959:(t,e,n)=>{const i=a5_0xf5b30e;n.r(e),n.d(e,{openIco:()=>g,parseDirectory:()=>w,parseHeader:()=>y,verifyIcoSignature:()=>p});class o extends Error{constructor(t){const e=a5_0x3fd8;super(Array[e(229)](t)?t[e(235)]((t=>function(t){const e=a5_0x3fd8;return t[e(313)]+": "+t[e(278)]}(t)))[e(300)]("\n"):t[e(278)]),this.problems=t}}const r={Info:()=>console.info,[i(283)]:()=>console[i(299)],[i(257)]:()=>console[i(244)]};function s(t){const e=i;t[e(298)]>0&&console[e(292)](e(289));for(const n of t)r[n[e(313)]]()(n[e(278)])}class a{constructor(t,e){const n=i;this._data=t,this[n(248)]=14+e[n(242)],this[n(282)]="paletteColorCount"in e?e[n(308)]:0,0===this._colorCount&&(this[n(282)]=Math[n(247)](2,e[n(302)]))}get[i(254)](){return 4*this[i(282)]}get[i(279)](){return this._colorCount}get(t){const e=i;return new Uint8Array([this[e(262)][this[e(248)]+4*t+2],this[e(262)][this._offset+4*t+1],this._data[this._offset+4*t],this[e(262)][this._offset+4*t+3]])}}var c=n(9094);function h(t,e,n){const o=i;if(t[o(268)](e)!==n)throw u(t[o(268)](e)+o(309)+n)}function f(t,e,n){const o=i;if(t.getUint16(e,!0)!==n)throw u(t[o(246)](e,!0)+o(309)+n)}function u(t){const e=i;return new o({message:e(238)+t,severity:e(257)})}var d=n(4085),l=n(6815);async function g(t){const e=i,n=[],o=new DataView(t[e(303)]);try{const r=function(t,e,n){const o=i,r=[];for(const i of e){const e=t.slice(i[o(239)],i.dataOffset+i[o(258)]);let s;const a=new Promise((t=>s=t)),c={width:i.width,height:i.height,data:new Uint8Array(0),mimeType:void 0,bitness:32},h={resource:c,readyPromise:a,isReady:!1};b(i,e,n)[o(312)]((t=>{const e=o;c[e(286)]=t[e(286)],c[e(285)]=t[e(285)],c[e(307)]=t.height,c[e(261)]=t[e(261)],c.bitness=t[e(290)],(0!==i[e(285)]&&i[e(285)]!==c[e(285)]||0!==i[e(307)]&&i[e(307)]!==c[e(307)])&&n&&n[e(301)]({message:"ICO entry ("+i[e(285)]+"x"+i[e(307)]+e(250)+h[e(264)][e(285)]+"x"+h[e(264)].height+")",severity:e(283)}),s(h[e(264)]),h[e(288)]=!0})),r.push(h)}return r}(t,w(o,y(o),n),n);return Promise[e(231)](r[e(235)]((t=>t[e(230)])))[e(312)]((()=>s(n))),r}catch(t){throw s(n),t}}function p(t){const e=i;if(t[e(314)]<4)throw new o({message:e(253)+t[e(314)]+")",severity:"Error"});if(0!==t[e(268)](0)||0!==t[e(268)](1)||1!==t.getUint8(2)||0!==t[e(268)](3)){const n=m(Array[e(256)](new Uint8Array(t.buffer)[e(273)](t[e(234)],t.byteOffset+4))),i=m([0,0,1,0]);throw new o({message:e(232)+n+" != "+i+")",severity:e(257)})}}function m(t){const e=i;return"0x"+t[e(235)]((t=>t.toString(16)[e(287)](2,"0")))[e(300)]("")}function y(t){const e=i;return p(t),f(t,0,0),f(t,2,1),function(t,e,n){const o=i;if(!(t[o(246)](4,!0)>0))throw u(o(305)+t.getUint16(4,!0))}(t),{imageCount:t[e(246)](4,!0)}}function w(t,e,n){const r=i,s=[];let a,c,f,u=0,d=0,l=0,g=0,p=6,m=6+16*e.imageCount;for(;s[r(298)]<e.imageCount;){if(u=t[r(268)](p),d=t[r(268)](p+1),l=t[r(268)](p+2),h(t,p+3,0),g=t[r(246)](p+4,!0),g>1)throw new o({message:"Cannot parse .ico files with > 1 color planes yet ("+g+")",severity:r(257)});if(a=t.getUint16(p+6,!0),2===a||16===a)throw new o({message:r(240)+a+r(310),severity:r(257)});0!==a&&1!==a&&4!==a&&8!==a&&24!==a&&32!==a&&(n&&n[r(301)]({message:r(272)+s[r(298)]+") color depth ("+a+r(260),severity:r(283)}),a=0),c=t.getUint32(p+8,!0),f=t[r(296)](p+12,!0),n&&m!==f&&n.push({message:r(237)+f+r(297)+(6+16*e.imageCount),severity:r(283)}),m+=c,s[r(301)]({width:u,height:d,paletteColorCount:l,colorPlanes:g,bitsPerPixel:a,dataSize:c,dataOffset:f}),p+=16}return s}async function b(t,e,n){const r=i;try{const t=await(0,l.dX)(e,{force32:!0});return{data:t[r(311)][r(286)],width:t.image.width,height:t[r(311)][r(307)],mimeType:r(275),bitness:32}}catch(s){try{return await async function(t,e,n){const r=i,s=new Uint8Array(14+t[r(298)]);s[r(236)](t,14);const h=new DataView(s[r(303)]),f=function(t,e=14){const n=i,r=t[n(246)](e,!0);switch(r){case 40:return function(t,e){const n=i,r=t[n(246)](e+12,!0);if(1!==r)throw new o({message:n(315),severity:n(257)});return{type:1,headerSize:40,bitmapWidth:t[n(296)](e+4,!0),bitmapHeight:t.getUint32(e+8,!0),colorPlaneCount:r,bitsPerPixel:t.getUint16(e+14,!0),compression:t[n(296)](e+16,!0),imageSize:t.getUint32(e+20,!0),horizontalResolution:t[n(296)](e+24,!0),verticalResolution:t[n(296)](e+28,!0),paletteColorCount:t[n(296)](e+32,!0),importantColorCount:t[n(296)](e+36,!0)}}(t,e);case 12:case 16:case 52:case 56:case 64:case 108:case 124:throw new o({message:n(293)+r+n(294),severity:n(257)});default:throw new o({message:n(233)+r+")",severity:n(257)})}}(h);f[r(270)]===2*f.bitmapWidth&&h[r(291)](22,f[r(304)],!0);const u=f[r(302)]/8,l=f[r(304)]*(f[r(270)]/2),g=l*u;if(t.length<f[r(242)]+g)throw new o({message:r(249)+t[r(298)]+r(255)+(f[r(242)]+g),severity:r(257)});let p;switch(f[r(302)]){case 1:case 4:case 8:p=function(t,e){const n=i,r=e[n(304)]*(e[n(270)]/2),s=(0,d.g)(e[n(304)]*e[n(302)],32),c=s/8,h=e.bitmapHeight/2*c;if(t[n(298)]<e[n(242)]+h)throw new o({message:n(249)+t[n(298)]+") to decode image, expected "+(e[n(242)]+h),severity:n(257)});const f=new a(t,e),u=t[n(241)](14+e[n(242)]+f[n(254)],14+e.headerSize+f[n(254)]+h),l=new Uint8Array(4*r);let g=0,p=0,m=0;for(let t=0;t<e[n(270)]/2;t++){m=(e[n(270)]/2-t-1)*e[n(304)]*4;for(let i=0;i<e[n(304)];i++){switch(e[n(302)]){case 1:p=t*s+i;const o=7-p%8;g=u[Math[n(306)](p/8)]>>o&1;break;case 4:p=t*s/e[n(302)]+i,g=p%2==0?u[p/2]>>4:15&u[Math.floor(p/2)];break;case 8:p=t*c+i,g=u[p]}l[n(236)](f[n(259)](g),m+4*i)}}return x(t,l,e,14+e[n(242)]+f[n(254)]+h),{data:l,width:e.bitmapWidth,height:e[n(270)]/2}}(s,f);break;case 24:p=function(t,e,n,o){const r=i,s=t[r(241)](14+e[r(242)],14+e[r(242)]+o),a=new Uint8Array(4*n);let c=0,h=0;for(let t=0;t<e.bitmapHeight/2;t++){h=(e[r(270)]/2-t-1)*e[r(304)]*4;for(let n=0;n<e[r(304)];n++)c=3*(t*e[r(304)]+n),a[h+4*n]=s[c+2],a[h+4*n+1]=s[c+1],a[h+4*n+2]=s[c]}return x(t,a,e,14+e[r(242)]+o),{data:a,width:e[r(304)],height:e.bitmapHeight/2}}(s,f,l,g);break;case 32:p=function(t,e,n,r){const s=i,a=s(308)in e?e[s(308)]:0;if(a)throw new o({message:"Cannot open .icos containing 32-bit bitmaps with palettes yet (color count="+a+")",severity:"Error"});const h=t.subarray(14+e[s(242)],14+e[s(242)]+r);32===e[s(302)]&&c.P[s(281)](h,e[s(304)]*(e[s(270)]/2));const f=new Uint8Array(h),u=e.bitmapWidth*n;let d=0;for(let t=0;t<e.bitmapHeight/2;t++)d=e.bitmapHeight/2-(t+1),f[s(236)](h.subarray(d*u,(d+1)*u),t*u);return{data:f,width:e[s(304)],height:e[s(270)]/2}}(s,f,u,g);break;default:throw new Error("Unexpected bpp "+f[r(302)])}return function(t){const e=i;let n=0;for(let i=0;i<t[e(307)];i++)for(let o=0;o<t[e(307)];o++)n=4*(i*t[e(285)]+o),0===t[e(286)][n+3]&&(t.data[n]=0,t.data[n+1]=0,t[e(286)][n+2]=0)}(p),{...p,mimeType:r(284),bitness:f[r(302)]}}(e)}catch(e){return n&&n[r(301)]({message:t[r(285)]+"x"+t[r(307)]+r(251)+(e instanceof Error?e.message:e),severity:r(257)}),{data:new Uint8Array(4),width:1,height:1,bitness:-1}}}}function x(t,e,n,o){const r=i,s=(0,d.g)(n.bitmapWidth,32),a=t[r(241)](o,o+s*n[r(270)]/2);let c=0,h=0;for(let t=0;t<n[r(270)]/2;t++){const i=s*t/8;for(let o=0;o<n[r(304)];o++){const s=7-o%8;c=a[i+Math[r(306)](o/8)]>>s&1,0===c&&(h=(n[r(270)]/2-t-1)*n[r(304)]*4,e[h+4*o+3]=255)}}}}}]);