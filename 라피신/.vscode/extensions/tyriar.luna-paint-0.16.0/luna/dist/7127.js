"use strict";const a8_0x41cd=["22845jLuuIx","type","getUint32","This image is encoded using a bottom right screen origin, many image editors won't read this correctly","webpackChunkluna",'" is greater than color map length "',"Image has ambiguous alpha and is fully transparent, alpha has been disabled","depth","view","screenOrigin","readUint8","reader","Color map type unrecognized","114278rCPeKx","colorMap","imageType",'Unsupported TGA bit depth "',"ambiguousAlpha","getUint8","developerDirectory","ceil","readUint32","offset","decode","95IWoUZj","541497ikafjf","360262khHinw","_le","extensionAreaOffset","data",'Color map origin "',"extensionArea","509nbEOzO",'" is invalid',"108343sSxqvM","buffer","height","4SSbWIK","fromCharCode","width","bitDepth","warnings","readUint16","identificationField","TGA file is a version other than v2","EOF while reading text",'Extension area offset "',"options","trim","byteOffset","push","byteLength",'" cannot have a color map',"getUint16","3euXxGw","398XsPVER","idLength","detectAmbiguousAlphaChannel","84883WcFHcS","developerDirectoryOffset","image","length",'Unsupported color map bit depth "',"strictMode","4zpQYJy","header","Offset is outside the bounds of the DataView","attributesType","hasAlpha","footer",'Developer directory offset "'],a8_0x586e=function(e,t){return a8_0x41cd[e-=409]},a8_0x15bd0e=a8_0x586e;!function(e,t){const r=a8_0x586e;for(;;)try{if(325965==-parseInt(r(461))-parseInt(r(462))+-parseInt(r(468))*-parseInt(r(420))+-parseInt(r(419))*parseInt(r(423))+parseInt(r(449))*-parseInt(r(473))+parseInt(r(429))*-parseInt(r(470))+-parseInt(r(460))*-parseInt(r(436)))break;e.push(e.shift())}catch(t){e.push(e.shift())}}(a8_0x41cd),(self.webpackChunkluna=self[a8_0x15bd0e(440)]||[])[a8_0x15bd0e(415)]([[7127],{7127:(e,t,r)=>{const n=a8_0x15bd0e;r.r(t),r.d(t,{decodeTga:()=>s});var i=r(8984);class o{constructor(e,t){const r=a8_0x586e;this[r(465)]=e,this[r(463)]=t,this.offset=0,this[r(444)]=new DataView(e[r(471)],e[r(414)],e[r(416)])}[n(446)](){const e=n;return this[e(444)].getUint8(this[e(458)]++)}[n(478)](){const e=n,t=this[e(444)][e(418)](this[e(458)],this[e(463)]);return this.offset+=2,t}[n(457)](){const e=n,t=this[e(444)][e(438)](this[e(458)],this[e(463)]);return this[e(458)]+=4,t}}function a(e,t,r,o){const a=n,s=[];let d=0,c=0;const f=e[a(447)][a(458)];for(;c<r;c++){try{d=e[a(447)].view[a(454)](e[a(447)].offset)}catch(t){throw t instanceof Error&&t.message===a(431)&&(0,i.pP)(e,new i.b4(a(410),e[a(447)].offset)),t}if(!o&&0===d)break;e.reader[a(458)]++,s.push(d)}return e[a(447)][a(458)]=f+r,t?t[a(459)](new Uint8Array(s)):String[a(474)](...s)}async function s(e,t={}){const r=n;var s,f;const b={reader:new o(e,!0),hasAlpha:!1,ambiguousAlpha:!1,options:t,warnings:[]},w=function(e){const t=n,r=e[t(447)].readUint8(),o=e[t(447)].readUint8();let a;0===o||1===o?a=o:((0,i.pP)(e,new i.b4(t(448),e[t(447)][t(458)]-1)),a=2);const s=e[t(447)][t(446)]();if(1!==(d=s)&&2!==d&&3!==d&&9!==d&&10!==d&&11!==d)throw new i._9(e,'Invalid image type "'+s+'"',e[t(447)].offset-1);var d;1===a&&1!==s&&9!==s&&(0,i.pP)(e,new i.b4('Image type "'+s+t(417),e.reader[t(458)]-2));const c=e.reader[t(478)](),f=e[t(447)][t(478)](),h=e.reader.readUint8();if(1===a&&(c>=f&&(0,i.pP)(e,new i.b4(t(466)+c+t(441)+f+'"',e[t(447)].offset-5)),15!==(l=h)&&16!==l&&24!==l&&32!==l))throw new i._9(e,t(427)+h+'"',e[t(447)][t(458)]-1);var l;const u=e[t(447)].readUint16(),p=e.reader[t(478)](),g=e[t(447)].readUint16(),b=e[t(447)][t(478)](),w=e[t(447)][t(446)]();if(v=w,!(1===(m=s)||9===m?8===v:3===m||11===m?8===v||16===v:15===v||16===v||24===v||32===v))throw new i._9(e,t(452)+w+'" with image type '+s,16);var v,m;const y=e[t(447)][t(446)](),x=(15&y)>>0,U=(48&y)>>4;return 1===U&&(0,i.pP)(e,new i.b4(t(439),e[t(447)][t(458)]-1)),3===U&&(0,i.pP)(e,new i.b4("This image is encoded using a top right screen origin, many image editors won't read this correctly",e[t(447)][t(458)]-1)),{idLength:r,colorMap:0!==a?{type:a,depth:h,length:f,origin:c}:void 0,imageType:s,origin:{x:u,y:p},width:g,height:b,bitDepth:w,imageDescriptor:y,attributeBitsPerPixel:x,screenOrigin:U}}(b),v={...b,header:w};v[r(479)]=a(v,void 0,v.header[r(421)]);const m=v[r(447)][r(458)];return v.footer=function(e){const t=n;if(e[t(447)][t(458)]=e[t(447)][t(444)][t(416)]-26+8,"TRUEVISION-XFILE."!==a(e,void 0,17)||0!==e[t(447)][t(446)]())return{extensionAreaOffset:0,developerDirectoryOffset:0};e.reader[t(458)]=e[t(447)][t(444)][t(416)]-26;let r=e[t(447)][t(457)]();r>=e[t(447)].view.byteLength&&((0,i.pP)(e,new i.b4(t(411)+r+t(469),e.reader[t(458)]-4)),r=0);let o=e.reader[t(457)]();return o>=e[t(447)].view.byteLength&&((0,i.pP)(e,new i.b4(t(435)+o+t(469),e.reader[t(458)]-4)),o=0),{extensionAreaOffset:r,developerDirectoryOffset:o}}(v),v[r(467)]=function(e){const t=n;var r;if(void 0===(null===(r=e[t(434)])||void 0===r?void 0:r.extensionAreaOffset)||0===e.footer[t(464)])return;e[t(447)][t(458)]=e[t(434)][t(464)];const o=e[t(447)][t(478)]();495!==o&&(0,i.pP)(e,new i.b4(t(409),e[t(447)][t(458)]-2));const s=a(e,void 0,41)[t(413)]()||void 0,d=a(e,void 0,324)[t(413)]()||void 0,c=function(e){const t=n,r=e[t(447)].readUint16(),i=e[t(447)][t(478)](),o=e[t(447)][t(478)](),a=e[t(447)][t(478)](),s=e.reader[t(478)](),d=e[t(447)][t(478)]();return 0===r&&0===i&&0===o&&0===a&&0===s&&0===d?void 0:new Date(o,r,i,a,s,d)}(e),f=a(e,void 0,41)[t(413)]()||void 0,h=function(e){const t=n,r=e[t(447)][t(478)](),i=e[t(447)][t(478)](),o=e[t(447)].readUint16();return 0===r&&0===i&&0===o?void 0:{hours:r,minutes:i,seconds:o}}(e),l=a(e,void 0,41)[t(413)]()||void 0,u=e[t(447)][t(446)]()/100,p=a(e,void 0,2);let g;g=0!==u||" "!==p&&0!==p.length?""+u+p:void 0;const b=e[t(447)][t(446)](),w=e[t(447)][t(446)](),v=e[t(447)][t(446)](),m=e[t(447)][t(446)]();let y;y=0===b&&0===w&&0===v&&0===m?void 0:new Uint8Array([w,v,m,b]);const x=e[t(447)][t(478)](),U=e[t(447)][t(478)]();let I;I=0===U?void 0:x/U;const A=e[t(447)][t(478)](),k=e[t(447)][t(478)]();let O;O=0===k?void 0:A/k;return{extensionSize:o,authorName:s,authorComments:d,dateTimestamp:c,jobName:f,jobTime:h,softwareId:l,softwareVersion:g,keyColor:y,aspectRatio:I,gamma:O,colorCorrectionOffset:e[t(447)][t(457)](),postageStampOffset:e[t(447)][t(457)](),scanLineOffset:e[t(447)][t(457)](),attributesType:e[t(447)].readUint8()}}(v),v[r(455)]=function(e){const t=n;var r;if(void 0===(null===(r=e[t(434)])||void 0===r?void 0:r[t(424)])||0===e[t(434)][t(424)])return[];e[t(447)][t(458)]=e[t(434)][t(424)];const i=e[t(447)][t(478)](),o=[];for(let r=0;r<i;r++){const r=e[t(447)].readUint16(),n=e.reader[t(457)](),i=e[t(447)][t(457)]();o.push({tag:r,offset:n,length:i})}return o}(v),v[r(447)][r(458)]=m,1===(null===(s=v[r(430)][r(450)])||void 0===s?void 0:s[r(437)])&&(v[r(450)]=function(e,t){const r=n,i=e[r(447)][r(458)],o=Math[r(456)](t[r(443)]/8);let a;switch(e[r(447)].offset+=t[r(426)]*o,t[r(443)]){case 15:a=h;break;case 16:a=e.hasAlpha?l:h;break;case 24:a=u;break;case 32:a=p}return(t,n,s,d)=>{const c=r,f=s.getUint8(d);return a(t,n,e[c(447)][c(444)],i+f*o),1}}(v,v.header[r(450)])),v.hasAlpha=v[r(450)]&&32===(null===(f=v[r(430)][r(450)])||void 0===f?void 0:f[r(443)])||(v[r(430)].attributeBitsPerPixel>0||32===v.header.bitDepth)&&(void 0===v[r(467)]||v.extensionArea[r(432)]>2),v[r(453)]=v[r(433)]&&0===v.header.attributeBitsPerPixel,v.image=function(e,t){const r=n,o={width:e[r(430)][r(475)],height:e.header.height,data:new Uint8Array(e[r(430)].width*e[r(430)][r(472)]*4)};let a;if(e.colorMap)a=e[r(450)];else switch(e[r(430)][r(476)]){case 8:a=d;break;case 15:a=h;break;case 16:a=11===e[r(430)][r(451)]||3===e[r(430)][r(451)]?c:e[r(433)]?l:h;break;case 24:a=u;break;case 32:a=e[r(433)]?p:g}let s=e[r(447)][r(444)];if(8&e.header[r(451)]){const i=function(e){const t=n,r=Math[t(456)](e.header[t(476)]/8),i=new Uint8Array(e.header[t(475)]*e.header.height*r);let o=0,a=0,s=0,d=0,c=0;for(;s<i[t(426)];)if(o=e[t(447)][t(446)](),a=1+(127&o),128&o){for(d=0;d<r;d++)for(o=e[t(447)][t(446)](),c=0;c<a;c++)i[s+c*r+d]=o;s+=a*r}else{a*=r;for(let r=0;r<a;r++)i[s++]=e[t(447)][t(446)]()}return i}(e);s=new DataView(i[r(471)],i.byteOffset,i.length),t=0}switch(e[r(430)][r(445)]){case 0:{let n=0;for(let i=o[r(472)]-1;i>=0;i--){n=e[r(430)][r(475)]*i*4;for(let e=0;e<o[r(475)];e++)t+=a(o.data,n,s,t),n+=4}break}case 1:{let n=0;for(let i=o[r(472)]-1;i>=0;i--){n=4*(e[r(430)].width*i+(e[r(430)].width-1));for(let e=0;e<o.width;e++)t+=a(o.data,n,s,t),n-=4}break}case 2:{let e=0;for(let n=0;n<o[r(472)];n++)for(let n=0;n<o.width;n++)t+=a(o[r(465)],e,s,t),e+=4;break}case 3:{let n=0;for(let i=0;i<o[r(472)];i++){n=4*(e[r(430)][r(475)]*i+(e.header[r(475)]-1));for(let e=0;e<o[r(475)];e++)t+=a(o[r(465)],n,s,t),n-=4}break}}if(e[r(453)]&&!e[r(412)][r(428)]&&e[r(412)][r(422)]){let t=!1;for(let e=3;e<o[r(475)]*o[r(472)]*4;e+=4)o[r(465)][e]>0&&(t=!0);if(!t){(0,i.pP)(e,new i.b4(r(442),-1));for(let e=3;e<o[r(475)]*o[r(472)]*4;e+=4)o.data[e]=255}}return o}(v,v[r(447)][r(458)]),{image:v[r(425)],details:{header:v[r(430)],imageId:v[r(479)],footer:v.footer,extensionArea:v[r(467)],developerDirectory:v[r(455)]},warnings:v[r(477)]}}function d(e,t,r,i){const o=n;return e[t]=r[o(454)](i),e[t+1]=e[t],e[t+2]=e[t],e[t+3]=255,1}function c(e,t,r,i){const o=n;return e[t]=r[o(454)](i),e[t+1]=e[t],e[t+2]=e[t],e[t+3]=r[o(454)](i+1),2}let f=0;function h(e,t,r,i){return f=r[n(418)](i,!0),e[t]=f>>10&31,e[t+1]=f>>5&31,e[t+2]=31&f,e[t]=e[t]<<3|e[t]>>2,e[t+1]=e[t+1]<<3|e[t+1]>>2,e[t+2]=e[t+2]<<3|e[t+2]>>2,e[t+3]=255,2}function l(e,t,r,n){return f=r.getUint16(n,!0),e[t]=f>>10&31,e[t+1]=f>>5&31,e[t+2]=31&f,e[t]=e[t]<<3|e[t]>>2,e[t+1]=e[t+1]<<3|e[t+1]>>2,e[t+2]=e[t+2]<<3|e[t+2]>>2,e[t+3]=32768&f?0:255,2}function u(e,t,r,i){const o=n;return e[t]=r[o(454)](i+2),e[t+1]=r[o(454)](i+1),e[t+2]=r[o(454)](i),e[t+3]=255,3}function p(e,t,r,i){const o=n;return e[t]=r[o(454)](i+2),e[t+1]=r[o(454)](i+1),e[t+2]=r[o(454)](i),e[t+3]=r.getUint8(i+3),4}function g(e,t,r,i){const o=n;return e[t]=r.getUint8(i+2),e[t+1]=r[o(454)](i+1),e[t+2]=r[o(454)](i),e[t+3]=255,4}}}]);