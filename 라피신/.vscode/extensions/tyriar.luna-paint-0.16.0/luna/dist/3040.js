"use strict";const a22_0x533d=["_targetX","imageService","1620180Alrthb","1448461UACNSm","type","range","2148863bLvBZZ","selectionService","onUpdate","validate","_updateSelection","_targetY","pointerUp","left","top","_refreshActionEnabledState","right","bottom","524823GBtqBj","altKey","Crop to Selection","_onUpdate","_originX","1YSqtRN","selection","_cropToSelectionAction","height","keyDown","sign","8926IATQKU","event","187GvPMCp","enabled","abs","pointerDown","_sc","Deselect","crop-to-selection","13773pBzxTx","actions","push","15CrvFWH","keyUp","_originY","130727GGQGrV","name","Rectangle Selection","_enabled","commit","viewportService","webpackChunkluna","getCoordsFromEvent","pointerDownMove","shiftKey","width"],a22_0x1177=function(t,i){return a22_0x533d[t-=110]},a22_0x1c1496=a22_0x1177;!function(t,i){const s=a22_0x1177;for(;;)try{if(908673===parseInt(s(156))+parseInt(s(112))*-parseInt(s(114))+-parseInt(s(140))+parseInt(s(121))*parseInt(s(124))+parseInt(s(141))+-parseInt(s(127))+parseInt(s(144))*parseInt(s(161)))break;t.push(t.shift())}catch(i){t.push(t.shift())}}(a22_0x533d),(self[a22_0x1c1496(133)]=self[a22_0x1c1496(133)]||[])[a22_0x1c1496(123)]([[3040],{6173:(t,i,s)=>{const e=a22_0x1c1496;s.d(i,{f:()=>o});var h=s(1815),n=s(5120);class o extends n.JT{constructor(t,i,s){const e=a22_0x1177;super(),this[e(128)]=t,this[e(142)]=i,this[e(130)]=s,this[e(159)]=this.register(new h.v),this.onUpdate=this[e(159)][e(113)]}get[e(115)](){return this[e(130)]}set[e(115)](t){const i=e;this[i(130)]!==t&&(this[i(130)]=t,this[i(159)].fire())}}},3040:(t,i,s)=>{const e=a22_0x1c1496;s.r(i),s.d(i,{default:()=>c});var h=s(5120),n=s(2939),o=s(1003),r=s(6173);class a extends h.JT{constructor(t){const i=a22_0x1177;super(),this._sc=t,this.id=i(162),this.isSelectionTool=!0,this._originX=0,this[i(126)]=0,this[i(163)]=new r.f(i(158),i(120),!1),this[i(122)]=[this[i(163)]],this.register(this[i(118)][i(145)][i(146)]((()=>this._refreshActionEnabledState()))),this[i(153)]()}[e(110)](t,i){this[e(148)](t,i)}[e(125)](t,i){this[e(148)](t,i)}[e(117)](t){const i=e;(this[i(118)][i(145)][i(143)]||void 0!==this[i(138)]||void 0!==this[i(149)])&&(this._targetX=void 0,this._targetY=void 0,this[i(118)][i(145)][i(143)]=void 0),[this._originX,this[i(126)]]=this[i(118)][i(132)][i(134)](t)}[e(150)](t,i){const s=e;if(i||void 0===this[s(138)]||void 0===this._targetY){this._sc[s(145)][s(143)]=void 0;const t=void 0===this[s(118)].selectionService[s(143)]?s(119):s(129);return void this[s(118)][s(145)][s(131)](t)}this._updateSelection(t,!1);const h=void 0===this[s(118)][s(145)].range?"Deselect":s(129);this[s(118)][s(145)][s(131)](h)}[e(135)](t){const i=e;[this._targetX,this._targetY]=this._sc[i(132)][i(134)](t),this[i(148)](t,!0)}_updateSelection(t,i){const s=e;if(!i||void 0===this._targetX||void 0===this[s(149)])return;let h=this[s(138)]-this[s(160)],r=this[s(149)]-this[s(126)];t[s(136)]&&(Math[s(116)](h)>Math.abs(r)?h=r*(Math[s(111)](h)!==Math[s(111)](r)?-1:1):r=h*(Math[s(111)](h)!==Math[s(111)](r)?-1:1));const a=this._sc[s(139)][s(137)],c=this[s(118)][s(139)][s(164)],_=(0,o.Pq)();r<0?(_[s(152)]=(0,n.u)(this[s(126)]+r,c),_[s(155)]=(0,n.u)(this[s(126)]+1+(t[s(157)]?-r:0),c)):(_[s(155)]=(0,n.u)(this[s(126)]+r+1,c),_[s(152)]=(0,n.u)(this[s(126)]+(t[s(157)]?-r:0),c)),h<0?(_.left=(0,n.u)(this[s(160)]+h,a),_[s(154)]=(0,n.u)(this._originX+1+(t[s(157)]?-h:0),a)):(_[s(154)]=(0,n.u)(this._originX+h+1,a),_[s(151)]=(0,n.u)(this[s(160)]+(t[s(157)]?-h:0),a)),this[s(118)].selectionService[s(143)]=_,this._sc[s(145)][s(147)](a,c)}[e(153)](){const t=e,i=this[t(118)][t(145)][t(143)];this[t(163)][t(115)]=!(!i||0===i[t(151)]&&0===i[t(152)]&&i[t(154)]===this[t(118)][t(139)][t(137)]&&i[t(155)]===this[t(118)].imageService.height)}}const c=a}}]);