"use strict";const a8_0x8540=["SharedArrayBuffer","length","23hTsRmI","isInteger","max","number","133135WYRySZ","658092pLEdRc","webpackChunkluna","round","color",'Invalid dimensions for image "',"set","min","right","pow","buffer","Unrecognized array type","floor","data","ceil","selection",'Images "',"5HSVpfH",'" and "','" dimensions differ'," must be contained within ","183wjHrZx","157832qXsvwI","height",'Range "',"426vPUULj","update","left","abs","replace","toFixed","bottom","tolerance","blendMode","targetImage","18728gGqrxO","width","286HwZmTz",'": ',"slice","top","subarray","1151mhdojU"," x ","164jTPqXL","1bZXKkH","21feovgo"],a8_0x3c86=function(t,n){return a8_0x8540[t-=373]},a8_0x38251e=a8_0x3c86;!function(t,n){const r=a8_0x3c86;for(;;)try{if(335443===parseInt(r(411))*-parseInt(r(415))+parseInt(r(412))+-parseInt(r(383))*-parseInt(r(374))+parseInt(r(379))*-parseInt(r(381))+-parseInt(r(390))*-parseInt(r(407))+parseInt(r(425))*parseInt(r(386))+parseInt(r(391))*-parseInt(r(382)))break;t.push(t.shift())}catch(n){t.push(t.shift())}}(a8_0x8540),(self[a8_0x38251e(392)]=self.webpackChunkluna||[]).push([[257],{257:(t,n,r)=>{r.r(n),r.d(n,{run:()=>c});var e=r(517),a=r(166),o=r(3),i=r(742);const c=async(t,n,r)=>{const c=a8_0x3c86;(0,i.ap)(r,c(424));const f=r[c(424)][c(403)],u=r.targetImage.width,h=r[c(424)][c(413)],l=r[c(394)],d=4*(r.y*u+r.x),p=f[c(378)](d,d+4)[c(376)](),M=r[c(405)]||(0,o.DI)(u,h),w=r[c(422)]*r[c(422)]*4,x=(0,a.Qf)(r.targetImage,M);if(n.update(.1),r[c(405)]){const t=Math[c(404)](M[c(421)]+(0,o.rY)(M)*(2/8));let a=0;for(let o=M[c(377)];o<M[c(421)];o++){for(let t=M[c(417)];t<M.right;t++)a=4*(o*u+t),s(f,a,p,w)&&(0,e.B)(r[c(423)],f,a,l,0);n[c(416)](+((o-M[c(377)])/t)[c(420)](2)+.1)}}else{const t=Math[c(404)](1.25*f[c(385)]);for(let a=0;a<f[c(385)];a+=4)s(f,a,p,w)&&(0,e.B)(r[c(423)],f,a,l,0),a%5e3==0&&n[c(416)](+(a/t)[c(420)](2)+.1)}return n[c(416)](.9),{undoData:x,redoData:(0,a.Qf)(r[c(424)],M),range:M}},f=new Int32Array(5);function s(t,n,r,e){return e>0?(f[0]=r[0]-t[n],f[1]=r[1]-t[n+1],f[2]=r[2]-t[n+2],f[3]=r[3]-t[n+3],f[4]=(1+f[0]*f[0])*r[3]/256+(1+f[1]*f[1])*r[3]/256+(1+f[2]*f[2])*r[3]/256+f[3]*f[3],f[4]<=e):t[n]===r[0]&&t[n+1]===r[1]&&t[n+2]===r[2]&&t[n+3]===r[3]}},742:(t,n,r)=>{r.d(n,{ap:()=>a,TO:()=>o,zg:()=>i});var e=r(3);function a(t,n){const r=a8_0x3c86,e=t[n];if(e[r(373)]<1||e[r(413)]<1)throw new Error(r(395)+n+r(375)+e[r(373)]+r(380)+e.height)}function o(t,n,r){const e=a8_0x3c86,a=t[n],o=t[r];if(a[e(373)]===o[e(373)]&&a[e(413)]===o[e(413)])throw new Error(e(406)+n+e(408)+r+'" dimensions are equal')}function i(t,n,r){const a=a8_0x3c86,o=t[n];if(!(0,e.ur)(r,o))throw new Error(a(414)+n+'" '+(0,e.PW)(o)+a(410)+(0,e.PW)(r))}},371:(t,n,r)=>{const e=a8_0x38251e;function a(t,n=2*t[e(385)]){const r=e;let a;if(t instanceof Float32Array)a=new Float32Array(n);else if(t instanceof Uint8Array)a=new Uint8Array(n);else if(t instanceof Uint16Array)a=new Uint16Array(n);else{if(!(t instanceof Uint32Array))throw new Error(r(401));a=new Uint32Array(n)}return a[r(396)](t),a}function o(t,n,r=!1){return n<Math[e(399)](2,8)?r?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math.pow(2,16)?r?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):r?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,n,r,e){t[n]=r[e],t[n+1]=r[e+1],t[n+2]=r[e+2],t[n+3]=r[e+3]}r.d(n,{Rs:()=>a,X$:()=>o,Yr:()=>i})},517:(t,n,r)=>{const e=a8_0x38251e;r.d(n,{B:()=>f});var a=r(371);const o=new Float32Array(6);let i;const c={normal:(t,n)=>n,darken:(t,n)=>Math[e(397)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[e(388)](t+n-1,0),lighten:(t,n)=>Math[e(388)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[e(397)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math.sqrt(t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[e(418)](t-n),exclusion:(t,n)=>t+n-2*t*n};function f(t,n,r,f,u,h=n,l=r){const d=e;if(t!==d(419)){if(o[0]=f[u+3]/255,0===o[0])return n[r]=h[l],n[r+1]=h[l+1],n[r+2]=h[l+2],void(n[r+3]=h[l+3]);if(o[1]=h[l+3]/255,0===o[1])return n[r]=f[u],n[r+1]=f[u+1],n[r+2]=f[u+2],void(n[r+3]=f[u+3]);i=c[t],o[3]=i(h[l]/255,f[u]/255),o[4]=i(h[l+1]/255,f[u+1]/255),o[5]=i(h[l+2]/255,f[u+2]/255),o[2]=o[0]+o[1]*(1-o[0]),n[r]=Math[d(393)](s(h[l]/255,o[1],f[u]/255,o[0],o[3])/o[2]*255),n[r+1]=Math[d(393)](s(h[l+1]/255,o[1],f[u+1]/255,o[0],o[4])/o[2]*255),n[r+2]=Math.round(s(h[l+2]/255,o[1],f[u+2]/255,o[0],o[5])/o[2]*255),n[r+3]=Math[d(393)](255*o[2])}else(0,a.Yr)(n,r,f,u)}function s(t,n,r,e,a){return(n-n*e)*t+(e-n*e)*r+n*e*a}},166:(t,n,r)=>{r.d(n,{Qf:()=>a,M_:()=>o});var e=r(3);function a(t,n){const r=a8_0x3c86,a=(0,e.Oq)(n),o=(0,e.rY)(n),i=new Uint8Array(a*o*4);let c=0,f=0;for(let e=0;e<o;e++)f=e+n.top,c=4*(f*t[r(373)]+n[r(417)]),i[r(396)](t[r(403)][r(378)](c,c+4*a),e*a*4);return i}function o(t,n,r,e,a=!0){const o=a8_0x3c86;if(!a&&n<e&&t<r)return{left:Math.round((r-t)/2),top:Math.round((e-n)/2),width:t,height:n};const i={left:0,top:0,width:r,height:e};if(n>t){const e=t/n;i[o(417)]=Math.round(r*(.5-e/2)),i[o(373)]=Math[o(393)](r*e)}else if(t>n){const r=n/t;i[o(377)]=Math[o(393)](e*(.5-r/2)),i[o(413)]=Math.round(e*r)}return i}},3:(t,n,r)=>{function e(t){const n=a8_0x3c86;if(t)return{left:t.left,top:t[n(377)],right:t[n(398)],bottom:t.bottom}}function a(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function o(t,n){return{left:0,top:0,right:t,bottom:n}}function i(t,n,r,e){const a=a8_0x3c86,o=function(t){const n=a8_0x3c86;if(t[n(417)]>t[n(398)]){const r=t[n(398)];t[n(398)]=t[n(417)],t[n(417)]=r}if(t[n(377)]>t[n(421)]){const r=t[n(421)];t[n(421)]=t[n(377)],t[n(377)]=r}if(t[n(398)]<t[n(417)]){const r=t.left;t.left=t.right,t[n(398)]=r}if(t[n(421)]<t.top){const r=t[n(377)];t[n(377)]=t[n(421)],t.bottom=r}return t}({left:t,top:n,right:r,bottom:e});return o[a(398)]++,o[a(421)]++,o}function c(t,n){const r=a8_0x3c86;return t.left=Math[r(397)](Math[r(388)](t[r(417)],n.left),n[r(398)]),t[r(377)]=Math[r(397)](Math[r(388)](t.top,n[r(377)]),n.bottom),t.right=Math[r(388)](Math.min(t[r(398)],n[r(398)]),n[r(417)]),t[r(421)]=Math[r(388)](Math[r(397)](t[r(421)],n.bottom),n[r(377)]),t}function f(t){const n=a8_0x3c86;return t[n(417)]=Math[n(402)](t.left),t[n(398)]=Math.ceil(t.right),t[n(377)]=Math[n(402)](t.top),t[n(421)]=Math[n(404)](t[n(421)]),t}function s(t,n,r){const e=a8_0x3c86;if(function(t){const n=a8_0x3c86;return t.left===t[n(398)]||t[n(377)]===t[n(421)]}(t))return t[e(417)]=n,t[e(398)]=n+1,t[e(377)]=r,void(t[e(421)]=r+1);t[e(417)]=Math.min(t[e(417)],n),t[e(377)]=Math.min(t[e(377)],r),t[e(398)]=Math[e(388)](t[e(398)],n+1),t[e(421)]=Math[e(388)](t[e(421)],r+1)}function u(t,n,r){const e=a8_0x3c86;return n>=t[e(417)]&&n<t[e(398)]&&r>=t.top&&r<t[e(421)]}function h(t,n){const r=a8_0x3c86;return n[r(417)]>=t[r(417)]&&n[r(398)]<=t[r(398)]&&n.top>=t[r(377)]&&n[r(421)]<=t[r(421)]}function l(t){const n=a8_0x3c86;return"("+t[n(417)]+","+t[n(377)]+")->("+t[n(398)]+","+t[n(421)]+")"}function d(t){const n=a8_0x3c86;return t[n(398)]-t[n(417)]}function p(t){const n=a8_0x3c86;return t[n(421)]-t[n(377)]}r.d(n,{BN:()=>e,Re:()=>a,DI:()=>o,tH:()=>i,l$:()=>c,kq:()=>f,Hv:()=>s,RB:()=>u,ur:()=>h,PW:()=>l,Oq:()=>d,rY:()=>p})}}]);