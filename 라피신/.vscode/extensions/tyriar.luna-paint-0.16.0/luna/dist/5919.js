"use strict";const a54_0x485d=["px ","update","Could not attain 2d context","text","13AxKCOT","getContext","push","top","length","rgba(","93RBJsNK","min"," x "," must be contained within ","round",'Images "'," bold","replace","isItalic"," italic",'" dimensions are equal',"isBold","map",'" and "',"The text can not be drawn outside of the selection and viewport","alignment","1031SqLSmX","left","width","measureText","trim","bottom","center","dimensions","ceil","primaryColor","right","middle","1010838TGgnnf","8ShAIGr",'" dimensions differ',"selection","fontSize","2946NMPpDw","webpackChunkluna","floor","63139xXyCYX","4727eYtCXw",'Invalid dimensions for image "',"justify","fillText","textAlign","data","blendMode","height","textBaseline","135877Uciplp","51803yhExZL","11MDgqbV","verticalAlignment","277OxJBoR",'Range "',"max","1IUGwdc","targetImage",'": ',"split"],a54_0x1afd=function(t,e){return a54_0x485d[t-=467]},a54_0x48a970=a54_0x1afd;!function(t,e){const a=a54_0x1afd;for(;;)try{if(426344==-parseInt(a(474))*parseInt(a(498))+-parseInt(a(485))*-parseInt(a(484))-parseInt(a(483))+-parseInt(a(473))*-parseInt(a(533))+-parseInt(a(487))*-parseInt(a(520))+-parseInt(a(470))*-parseInt(a(504))+parseInt(a(532))*-parseInt(a(490)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a54_0x485d),(self[a54_0x48a970(471)]=self[a54_0x48a970(471)]||[])[a54_0x48a970(500)]([[5919],{5919:(t,e,a)=>{a.r(e),a.d(e,{run:()=>f});var n=a(4371),r=a(7517),o=a(2939),i=a(1003),s=a(7742);const f=async(t,e,a)=>{const f=a54_0x1afd;return(0,s.ap)(a,f(491)),function(t,e){const a=a54_0x1afd,s=e.targetImage[a(522)],f=e.targetImage[a(481)],l={...e[a(527)]};if(l[a(521)]=Math.floor(l[a(521)]),l[a(530)]=Math.ceil(l[a(530)]),l[a(501)]=Math[a(472)](l[a(501)]),l[a(525)]=Math.ceil(l[a(525)]),l.left=(0,o.u)(Math[a(472)](l[a(521)]),s,0),l.right=(0,o.u)(Math.ceil(l.right),s,0),l.top=(0,o.u)(Math[a(528)](l.top),f,0),l[a(525)]=(0,o.u)(Math[a(528)](l[a(525)]),f,0),e[a(468)]&&(e[a(468)][a(521)]>l[a(521)]&&(l[a(521)]=Math[a(505)](e[a(468)][a(521)],l[a(530)])),e[a(468)].right<l.right&&(l[a(530)]=Math.max(e[a(468)][a(530)],l[a(521)])),e.selection[a(501)]>l.top&&(l[a(501)]=Math[a(505)](e[a(468)][a(501)],l.bottom)),e[a(468)][a(525)]<l[a(525)]&&(l.bottom=Math[a(489)](e[a(468)][a(525)],l[a(501)]))),l[a(521)]===l[a(530)]||l[a(501)]===l[a(525)])throw new Error(a(518));const c=(0,i.Oq)(l),h=(0,i.rY)(l),d=(0,i.Oq)(e.dimensions),u=(0,i.rY)(e[a(527)]),x=new OffscreenCanvas(c,h)[a(499)]("2d");if(!x)throw new Error(a(496));let p="";e[a(515)]&&(p+=a(510)),e[a(512)]&&(p+=a(513)),p+=" "+e.fontSize+a(494)+e.fontFamily,x.font=p[a(524)](),x[a(478)]=a(521),x[a(482)]=a(501),x.fillStyle=a(503)+e.primaryColor[0]+","+e[a(529)][1]+","+e.primaryColor[2]+","+e[a(529)][3]/255+")";const g=function(t,e,a){const n=a54_0x1afd,r=[],o=e[n(493)]("\n");for(const e of o){const o=e.split(" ");let i=o[0];for(let e=1;e<o.length;e++){const s=o[e];t[n(523)](i+" "+s)[n(522)]<a?i+=" "+s:(r[n(500)]({text:i,width:t.measureText(i)[n(522)]}),i=s)}r.push({text:i,width:t[n(523)](i)[n(522)]})}return r}(x,e[a(497)],d),m=e[a(469)];let w;switch(e[a(486)]){case a(501):w=0;break;case a(531):w=Math[a(508)]((u-g.length*m)/2);break;case a(525):w=u-m*g.length}if(w+=e.dimensions[a(501)]-l[a(501)],e[a(519)]===a(476))for(const t of g){const n=t[a(497)][a(493)](" ")[a(516)]((t=>{const e=a;return{text:t,width:x[e(523)](t)[e(522)]}})),r=(d-n.reduce(((t,e)=>t+e[a(522)]),0))/(n.length-1);let o=e[a(527)][a(521)]-l[a(521)];for(const t of n)x[a(477)](t[a(497)],Math[a(508)](o),w),o+=t[a(522)]+r;w+=m}else for(const t of g){let n;switch(e[a(519)]){case"left":n=0;break;case a(526):n=d/2,x[a(478)]=a(526);break;case a(530):n=d,x.textAlign=a(530)}n+=e[a(527)][a(521)]-l[a(521)],x.fillText(t.text,n,w),w+=m}const I=x.getImageData(0,0,c,h),M=(0,n.X$)(s*f,s*f*4,!0),b=(0,n.X$)(s*f*2,Math[a(489)](s,f),!0);let _=0,y=0,C=0,A=0;for(C=0;C<h;C++)for(y=0;y<c;y++)A=4*(C*c+y),I[a(479)][A+3]>0&&(b[2*_]=y,b[2*_+1]=C,M[_++]=4*((l[a(501)]+C)*s+l.left+y));const S=M.subarray(0,_);t.update(.25);const T=new Uint8Array(new SharedArrayBuffer(4*M[a(502)]));for(A=0;A<M.length;A++)(0,n.Yr)(T,4*A,e[a(491)].data,M[A]);if(t.update(.5),e[a(480)]===a(511))for(A=0;A<S[a(502)];A++)(0,n.Yr)(e.targetImage[a(479)],S[A],I[a(479)],4*(b[2*A+1]*c+b[2*A]));else for(A=0;A<S.length;A++)(0,r.B)(e.blendMode,e[a(491)][a(479)],S[A],I.data,4*(b[2*A+1]*c+b[2*A]));t[a(495)](.75);const k=new Uint8Array(new SharedArrayBuffer(4*M.length));for(A=0;A<M[a(502)];A++)(0,n.Yr)(k,4*A,e[a(491)][a(479)],M[A]);return t[a(495)](1),{undoData:{indexList:S,colorData:T},redoData:{indexList:S,colorData:k},range:l}}(e,a)}},7742:(t,e,a)=>{a.d(e,{ap:()=>r,TO:()=>o,zg:()=>i});var n=a(1003);function r(t,e){const a=a54_0x1afd,n=t[e];if(n.width<1||n.height<1)throw new Error(a(475)+e+a(492)+n[a(522)]+a(506)+n[a(481)])}function o(t,e,a){const n=a54_0x1afd,r=t[e],o=t[a];if(r[n(522)]===o[n(522)]&&r[n(481)]===o[n(481)])throw new Error(n(509)+e+n(517)+a+n(514))}function i(t,e,a){const r=a54_0x1afd,o=t[e];if(!(0,n.ur)(a,o))throw new Error(r(488)+e+'" '+(0,n.PW)(o)+r(507)+(0,n.PW)(a))}}}]);