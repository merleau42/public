"use strict";const a21_0x1baf=["getInfo","key","_styleOption","pointerUp","632204CJqnxX","_viewportService","max","min"," x ","_blendModeOption","type","_cursorCurrent","onCommit","top","onHistoryUpdateValue","order","flipY","outlineSize","block","temporaryLayer","webpackChunkluna","historyService","lighten","onRequestRender","ctrlKey","allowUnchecking","screen","value","_model","taskWorkerService","new","currentLayer","Draw Rectangle","set","bottom","_imageService","_clearRectLayer","282812oqtBPu","getPointerState","right","primaryColor","_elementContainer","_range","onStateChange","range","_refreshInfo","diamond","_onStateChange","topleft","handleOptionUpdate","commit","move-handle","_outlineSizeOption","_createRange","67161FmkbaT","_svgPath2","_svg","onLayerChange"," pixels tall","shape","Outline","push","number","overlay","_onHistoryUpdateValue","path","_finish","_onOptionsChange","clientWidth","multiply","getOutlineSvgPath","taskService","_updateRectangle","1.1","hasImage","position","toString","ArrowRight","move","none","onHistoryAction","buttons","_setState","deserialize","MoveImageRangeRenderer","height","shiftKey","19777dErcxR","Shift Rectangle","Blend Mode","name","viewportService","_outlineModel","offsetY","getDetailedInfo"," pixels wide by ","unregisterTemporaryLayer","115icWEvr","exclusion","round","Rectangle top left position is x=","_getStyleValue","offsetX","abs","pointerDown","secondary","bottomright","primary","softLight","pointerMove","size","Style","event","sign","triangle","5JGOeeE","register","add","_directionalMoveElements","setValueFromHistoryChange","stroke","normal","Set Rectangle Outline Size","options","onTemporaryLayerRegistered","fire","display","_container","_sc","append","_isVisible","imageService","zoom","ArrowUp","_updateColors","string","topright","style","appendChild","_allowNewState","linearBurn","setVisible","absolute","altKey","_directionalMoveZones","_onUpdate","ArrowLeft","_rectangleOtherPoint","flipX","_topLeftInfo","_sizeInfo","Set Rectangle Style","_rectangleOrigin","_renderer","_value","currentState","paletteService","_cursorOriginalRectangle","_getLayer","bind","_getStyleString","rectLayer","var(--luna-focusColor)","replace","rgba","prepend","fill","createDomRenderProgram","visible","get","darken","width","step","then","bottomleft","strokeWidth","createElement","createElementNS","setRange","108277Nortfh","1017QxyPZr","onUpdate","string-combo","1dMUsxk","left","transparent","serialize","setAttribute","Fill","clientHeight","_onRequestRender","triggerRequestRender","secondaryColor","getCoordsFromEvent","state","Resize Rectangle","Outline Size","render","removeChild"," y=","9PDJKYJ","_svgPath","default","_setupActiveTemporaryLayer","keyUp","ArrowDown","ellipse","_getRange","5509VwPFuF","devicePixelRatio","Move Rectangle","_cursorOrigin","rectangle","Set Rectangle Blend Mode","blendMode","linearDodgeAdd","selectionService"],a21_0x4b63=function(t,e){return a21_0x1baf[t-=181]},a21_0x5d060d=a21_0x4b63;!function(t,e){const s=a21_0x4b63;for(;;)try{if(148539===parseInt(s(281))+-parseInt(s(359))*-parseInt(s(235))+parseInt(s(331))*parseInt(s(227))+-parseInt(s(210))*-parseInt(s(206))+-parseInt(s(207))*-parseInt(s(341))+parseInt(s(298))+-parseInt(s(248)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a21_0x1baf),(self[a21_0x5d060d(264)]=self[a21_0x5d060d(264)]||[])[a21_0x5d060d(305)]([[7440,504],{3315:(t,e,s)=>{const i=a21_0x5d060d;s.d(e,{d:()=>c});var h=s(5120),r=s(1003),n=s(1674);let o,a;class c extends h.JT{constructor(t,e,s,i){const h=a21_0x4b63;super(),this[h(371)]=t,this[h(279)]=e,this[h(249)]=s,this[h(272)]=i,this[h(259)]=2,this[h(300)]=document[h(204)](n.q,"svg"),this[h(300)][h(214)]("version",h(317)),this[h(300)].style[h(319)]=h(386),this[h(228)]=document.createElementNS(n.q,h(309)),this[h(228)].style.stroke=h(189),this[h(228)].style[h(193)]=h(212),this._svgPath[h(381)][h(202)]="1",this._svgPath2=document[h(204)](n.q,"path"),this[h(299)].style[h(364)]=h(189),this[h(299)].style[h(193)]=h(212),this[h(299)][h(381)][h(202)]="1",this[h(300)][h(373)](this._svgPath,this._svgPath2),this[h(371)][h(192)](this[h(300)]),this[h(360)]({dispose:()=>this[h(371)][h(225)](this[h(300)])})}async[i(224)](){const t=i,e=this._model[t(288)],h=this._viewportService;if(!e)return void(this[t(300)][t(381)].display=t(323));if(this[t(300)][t(381)][t(370)]=t(262),!this[t(279)][t(275)])return;if(o!==this[t(272)][t(303)]){let e;switch(o=this._model.shape,o){case t(290):e=s.e(727)[t(200)](s[t(186)](s,727));break;case t(233):e=s.e(8459)[t(200)](s[t(186)](s,8459));break;case t(358):e=s.e(4012)[t(200)](s[t(186)](s,4012));break;case"rightTriangle":e=s.e(6243)[t(200)](s[t(186)](s,6243));break;default:e=void 0}a=e?new Promise((async s=>{const i=t;s(new((await e)[i(229)]))})):e}const n=await a,c=Math[t(343)](this[t(371)][t(312)]/2)-this[t(279)].width/2*h[t(376)]+h.x*h[t(376)],l=Math[t(343)](this[t(371)][t(216)]/2)-this[t(279)].height/2*h.zoom+h.y*h[t(376)],d=(0,r.Oq)(e)*h.zoom,u=(0,r.rY)(e)*h.zoom;this[t(300)][t(381)][t(211)]=c+e[t(211)]*h[t(376)]-2+"px",this[t(300)][t(381)][t(257)]=l+e[t(257)]*h[t(376)]-2+"px",this[t(300)][t(214)](t(198),(d+5)[t(320)]()),this[t(300)][t(214)](t(329),(u+5).toString()),this[t(228)][t(214)]("d","M2.5 2.5 h"+d+" v"+u+" h"+-d+" v"+-u),n?.[t(314)]?(this._svgPath2[t(381)][t(370)]=t(262),this[t(299)][t(214)]("d",n[t(314)](d,u,this[t(272)][t(392)],this[t(272)][t(260)]))):this._svgPath2[t(381)].display=t(323)}}},9865:(t,e,s)=>{s.d(e,{q:()=>r});var i=s(1815),h=s(5120);class r extends h.JT{constructor(){const t=a21_0x4b63;super(...arguments),this._onUpdate=this[t(360)](new i.v),this[t(208)]=this[t(389)][t(356)]}}},9904:(t,e,s)=>{const i=a21_0x5d060d;s.d(e,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>d,qv:()=>u});var h=s(1815),r=s(5120),n=s(2939);class o extends r.JT{constructor(t,e,s,i=!0){const r=a21_0x4b63;super(),this[r(334)]=t,this[r(318)]=e,this[r(181)]=s,this[r(269)]=i,this[r(254)]="boolean",this[r(308)]=this.register(new h.v),this.onHistoryUpdateValue=this[r(308)][r(356)],this._onUpdate=this[r(360)](new h.v),this[r(208)]=this[r(389)][r(356)]}get[i(271)](){return this[i(181)]}set[i(271)](t){const e=i;this._value=t,this[e(389)].fire(t)}setValueFromHistoryChange(t){const e=i;this._value=t,this._onHistoryUpdateValue[e(369)](t)}}class a extends r.JT{constructor(t,e,s){const r=i;super(),this[r(334)]=t,this[r(367)]=e,this[r(181)]=s,this.type=r(379),this[r(308)]=this[r(360)](new h.v),this.onHistoryUpdateValue=this[r(308)][r(356)],this[r(389)]=this[r(360)](new h.v),this[r(208)]=this[r(389)][r(356)]}get[i(271)](){return this[i(181)]}set[i(271)](t){const e=i;this._value=t,this[e(389)][e(369)](t)}[i(363)](t){const e=i;this[e(181)]=t,this[e(308)][e(369)](t)}}class c extends r.JT{constructor(t,e,s){const r=i;super(),this[r(334)]=t,this[r(367)]=e,this._value=s,this[r(254)]=r(209),this[r(308)]=this[r(360)](new h.v),this[r(258)]=this[r(308)][r(356)],this[r(389)]=this[r(360)](new h.v),this[r(208)]=this._onUpdate[r(356)]}get[i(271)](){return this[i(181)]}set[i(271)](t){const e=i;this[e(181)]=t,this[e(389)].fire(t)}[i(363)](t){const e=i;this[e(181)]=t,this[e(308)][e(369)](t)}}class l extends a{constructor(){const t=i;super("Blend Mode",[t(365),t(190),t(197),t(313),t(384),"lighten",t(270),t(242),t(307),t(352),"difference",t(342)],t(365))}}class d extends r.JT{constructor(t,e,s,r){const n=i;super(),this.name=t,this._value=e,this.min=s,this[n(250)]=r,this[n(254)]=n(306),this[n(308)]=this[n(360)](new h.v),this[n(258)]=this[n(308)].event,this[n(389)]=this[n(360)](new h.v),this[n(208)]=this[n(389)][n(356)]}get value(){const t=i;return(0,n.u)(this[t(181)],this[t(250)],this[t(251)])}set[i(271)](t){const e=i;this[e(181)]=t,this._onUpdate[e(369)](t)}setValueFromHistoryChange(t){const e=i;this._value=t,this[e(308)][e(369)](t)}}class u extends d{constructor(t,e,s,h){const r=i;super(t,e,s,h),this.type=r(306)}get[i(271)](){const t=i;return(0,n.u)(this[t(181)],this[t(250)],this.min)}set[i(271)](t){const e=i;this[e(181)]=Math.floor(t),this[e(389)].fire(t)}}},504:(t,e,s)=>{const i=a21_0x5d060d;s.r(e),s.d(e,{MoveImageRangeRenderer:()=>n});var h=s(5120),r=s(1003);class n extends h.JT{constructor(t,e,s,i,h){const n=a21_0x4b63;super(),this._container=t,this[n(234)]=e,this._allowNewState=s,this[n(249)]=i,this._imageService=h,this.order=2,this[n(362)]=new Map,this[n(388)]=new Map,this[n(374)]=!0,this._elementContainer=document[n(203)]("div");const o=[n(292),n(380),n(201),n(350),n(257),n(278),n(211),n(283)];for(const t of o){const e=document.createElement("div");e.classList[n(361)](n(295),t),this[n(285)][n(382)](e),this[n(362)][n(277)](t,e),this._directionalMoveZones[n(277)](t,(0,r.Pq)())}this[n(371)][n(382)](this._elementContainer),this[n(360)]({dispose:()=>{this[n(371)].removeChild(this._elementContainer)}})}[i(385)](t){const e=i;t!==this._isVisible&&(this[e(285)][e(381)][e(370)]=t?"":e(323),this[e(374)]=t)}[i(205)](t){}render(){const t=i,e=this[t(234)]();if(!e)return;const s=this[t(279)].currentLayer;if(!s)return;const h=this._viewportService,r=Math.round(this[t(371)][t(312)]/2)-s.width/2*h.zoom,n=Math[t(343)](this._container[t(216)]/2)-s[t(329)]/2*h.zoom,o=r+(h.x+e.left)*h[t(376)],a=n+(h.y+e.top)*h.zoom,c=r+(h.x+e[t(283)])*h[t(376)],l=n+(h.y+e[t(278)])*h[t(376)],d=Math[t(343)]((o+c)/2),u=Math[t(343)]((a+l)/2),p=10*window[t(236)],g={left:Math[t(251)](o+p,Math[t(250)](o,d-p)),top:Math[t(251)](a+p,Math[t(250)](a,u-p)),right:Math[t(250)](c-p,Math[t(251)](c,d+p)),bottom:Math.max(l-p,Math.min(l,u+p))},_={left:o-p,top:a-p,right:c+p,bottom:l+p},y=this[t(388)][t(196)](t(292));y[t(211)]=_.left,y[t(283)]=g[t(211)],y[t(257)]=_[t(257)],y[t(278)]=g[t(257)];const v=this._directionalMoveElements[t(196)]("topleft");v[t(381)].left=o+"px",v[t(381)][t(257)]=a+"px";const f=this._directionalMoveZones[t(196)]("topright");f.left=g[t(283)],f[t(283)]=_[t(283)],f[t(257)]=_[t(257)],f[t(278)]=g[t(257)];const m=this[t(362)][t(196)](t(380));m[t(381)].left=c+"px",m.style.top=a+"px";const b=this[t(388)].get("bottomleft");b.left=_[t(211)],b[t(283)]=g.left,b[t(257)]=g.bottom,b[t(278)]=_[t(278)];const w=this[t(362)][t(196)]("bottomleft");w.style[t(211)]=o+"px",w[t(381)][t(257)]=l+"px";const M=this._directionalMoveZones.get("bottomright");M.left=g[t(283)],M[t(283)]=_.right,M.top=g.bottom,M.bottom=_[t(278)];const x=this._directionalMoveElements[t(196)](t(350));x[t(381)][t(211)]=c+"px",x[t(381)][t(257)]=l+"px";const S=this[t(388)][t(196)](t(257));S[t(211)]=g[t(211)],S.right=g[t(283)],S[t(257)]=_[t(257)],S.bottom=g.top;const R=this[t(362)][t(196)](t(257));R[t(381)][t(211)]=d+"px",R[t(381)][t(257)]=a+"px";const L=this[t(388)][t(196)](t(278));L[t(211)]=g[t(211)],L[t(283)]=g.right,L[t(257)]=g[t(278)],L[t(278)]=_[t(278)];const C=this[t(362)][t(196)](t(278));C.style[t(211)]=d+"px",C[t(381)][t(257)]=l+"px";const O=this[t(388)][t(196)](t(211));O[t(211)]=_[t(211)],O[t(283)]=g[t(211)],O[t(257)]=g.top,O[t(278)]=g.bottom;const k=this._directionalMoveElements[t(196)](t(211));k[t(381)][t(211)]=o+"px",k[t(381)][t(257)]=u+"px";const P=this[t(388)][t(196)](t(283));P[t(211)]=g[t(283)],P[t(283)]=_[t(283)],P.top=g[t(257)],P[t(278)]=g[t(278)];const I=this[t(362)][t(196)](t(283));I[t(381)][t(211)]=c+"px",I[t(381)][t(257)]=u+"px"}[i(282)](t){const e=i;if(!this._getRange())return this._allowNewState?e(274):e(322);for(const[s,i]of this._directionalMoveZones)if((0,r.RB)(i,t[e(346)],t[e(337)]))return s;const s=this[e(388)][e(196)](e(292)),h=this._directionalMoveZones.get(e(350)),n={left:s[e(211)],top:s[e(257)],right:h.right,bottom:h[e(278)]};return(0,r.RB)(n,t.offsetX,t[e(337)])?e(322):this[e(383)]?"new":e(322)}}},7440:(t,e,s)=>{const i=a21_0x5d060d;s.r(e),s.d(e,{default:()=>_});var h=s(8752),r=s(1815),n=s(5120),o=s(7896),a=s(1003),c=s(807),l=s(3315),d=s(9865),u=s(9904),p=s(504);class g extends n.JT{constructor(t){const e=a21_0x4b63;super(),this[e(372)]=t,this.id=e(239),this[e(221)]=e(274),this._outlineModel=new y((()=>this.rectLayer)),this._blendModeOption=new u.Jp,this[e(246)]=new u.rP(e(355),["Outline",e(215),"Fill and outline"],e(304)),this[e(296)]=new u.qv(e(223),1,1,1e3),this[e(367)]=[this[e(253)],this[e(246)],this[e(296)]],this[e(394)]=new v,this[e(393)]=new f,this.info=[this[e(393)],this[e(394)]],this[e(217)]=this.register(new r.v),this[e(267)]=this._onRequestRender[e(356)],this._onStateChange=this[e(360)](new r.v),this[e(287)]=this[e(291)].event,this.register(this[e(372)][e(183)][e(208)]((()=>this[e(378)]()))),this[e(360)](this._styleOption[e(208)]((t=>this[e(188)]?.handleOptionUpdate(this._getStyleValue(),e(381),e(395))))),this[e(360)](this[e(296)].onUpdate((t=>this[e(188)]?.handleOptionUpdate(t,e(261),e(366),!0)))),this.register(this[e(253)][e(208)]((t=>this.rectLayer?.[e(293)](t,e(241),e(240))))),this[e(360)](this[e(372)][e(375)][e(301)]((()=>this[e(310)]()))),this[e(360)](this[e(372)][e(315)].onBeforeRunLayerTask((()=>this[e(310)]()))),this.register({dispose:()=>this._finish()}),this[e(360)](this[e(372)].imageService[e(368)]((t=>this[e(230)](t)))),this[e(372)][e(375)].currentLayer?.[e(263)]&&this[e(230)](this._sc[e(375)][e(275)].temporaryLayer)}_setupActiveTemporaryLayer(t){const e=a21_0x4b63;t[e(254)]===e(239)&&(this[e(188)]=t,this[e(360)](this[e(188)][e(256)]((()=>this[e(280)]()))),this[e(360)](this.rectLayer[e(324)]((()=>{const t=e;this[t(311)](),this[t(289)]()}))),this[e(360)](this[e(188)].onHistoryUnset((()=>this[e(280)]()))),this[e(396)]=[this[e(188)][e(182)].range.left,this[e(188)][e(182)].range.top],this._rectangleOtherPoint=[this.rectLayer[e(182)][e(288)][e(283)],this.rectLayer.currentState[e(288)][e(278)]],this[e(397)]?.[e(385)](!0),this._onRequestRender.fire())}keyDown(t,e){const s=a21_0x4b63;if(this._updateRectangle(t,e),this[s(188)]&&!e&&[s(377),s(390),s(232),s(321)].includes(t[s(245)])){const e=(0,a.BN)(this[s(188)].currentState.range),i=(o.V5?t.metaKey:t[s(268)])?10:1;switch(t[s(245)]){case s(377):(0,a.Hd)(e,e.left,e.top-i);break;case s(232):(0,a.Hd)(e,e[s(211)],e.top+i);break;case s(390):(0,a.Hd)(e,e[s(211)]-i,e[s(257)]);break;case"ArrowRight":(0,a.Hd)(e,e[s(211)]+i,e[s(257)])}this.rectLayer[s(182)][s(288)]=e,this[s(188)][s(199)](s(332))}}[i(231)](t,e){this[i(316)](t,e)}async[i(348)](t){const e=i,s=this[e(372)][e(375)][e(275)];if(!s)return;const h=!(1&t[e(325)]),r=this[e(372)][e(335)][e(220)](t);if(this[e(238)]=r,this[e(255)]=r,!r)return;if("new"!==this[e(221)])return this[e(184)]=(0,a.BN)(this.rectLayer?.currentState.range),void(this[e(184)]&&((this[e(221)]===e(257)||this[e(221)]===e(292)||"topright"===this[e(221)])&&(this[e(238)][1]=this[e(184)].top),("bottom"===this[e(221)]||this[e(221)]===e(201)||this.state===e(350))&&(this[e(238)][1]=this._cursorOriginalRectangle[e(278)]-1),("left"===this[e(221)]||this[e(221)]===e(292)||this[e(221)]===e(201))&&(this[e(238)][0]=this[e(184)].left),(this[e(221)]===e(283)||this.state===e(380)||this[e(221)]===e(350))&&(this._cursorOrigin[0]=this[e(184)][e(283)]-1)));await this[e(310)](),this[e(396)]=r,this[e(391)]=r;const n=this[e(297)](this[e(396)],this._rectangleOtherPoint);this._cursorOriginalRectangle=(0,a.BN)(n),this[e(188)]=new c.F(s,{invertColors:h},{primaryColor:this[e(372)].paletteService[e(351)][e(191)],secondaryColor:this[e(372)][e(183)][e(349)][e(191)],blendMode:this[e(253)][e(271)],range:n,outlineSize:this[e(296)].value,style:this._getStyleValue()},this[e(372)][e(265)],this._sc[e(243)],this[e(372)][e(273)]),this[e(289)](),await s.registerTemporaryLayer(this[e(188)]),this[e(397)]?.[e(385)](!1),this[e(188)][e(218)]()}async[i(247)](t,e){const s=i;if(this[s(221)]===s(274)&&(e||this[s(255)]?.[0]===this[s(238)]?.[0]&&this[s(255)]?.[1]===this[s(238)]?.[1]))return this.rectLayer&&this[s(372)].imageService.currentLayer?.[s(340)](this[s(188)]),this.rectLayer?.dispose(),void this[s(280)]();if(this.rectLayer){let t;switch(this[s(221)]){case s(274):t=s(276);break;case s(322):t=s(237);break;case s(292):case"topright":case"bottomleft":case s(350):case s(257):case s(211):case s(283):case s(278):t=s(222)}this.rectLayer[s(199)](t)}this._renderer?.[s(385)](!0),this.pointerMove(t,!1)}pointerDownMove(t){const e=i;if(!(this._rectangleOrigin&&this[e(391)]&&this[e(238)]&&this[e(184)]))return;if(!this[e(372)].imageService[e(275)])return;const s=this[e(372)][e(335)][e(220)](t);if(this[e(255)]&&s[0]===this[e(255)][0]&&s[1]===this[e(255)][1])return;if(this[e(255)]=s,!this[e(188)])return;const h=this[e(255)][0]-this[e(238)][0],r=this._cursorCurrent[1]-this[e(238)][1];switch(this[e(221)]){case e(274):return this[e(391)]=s,void this[e(316)](t,!0);case"move":{const t=(0,a.BN)(this[e(184)]);t[e(211)]+=h,t[e(257)]+=r,t[e(283)]+=h,t.bottom+=r,(0,a.FJ)(t),this.rectLayer[e(182)][e(288)]=t;break}default:{let s;if(!t[e(330)]||this[e(221)]!==e(292)&&this[e(221)]!==e(380)&&this[e(221)]!==e(201)&&this.state!==e(350))s=(0,a.BN)(this[e(184)]),(this[e(221)]===e(257)||this[e(221)]===e(292)||this[e(221)]===e(380))&&(s.top+=r,s[e(278)]<=s[e(257)]&&s[e(257)]++,t[e(387)]&&(s[e(278)]-=r)),(this[e(221)]===e(278)||"bottomleft"===this.state||this[e(221)]===e(350))&&(s[e(278)]+=r,s.bottom<=s[e(257)]&&s[e(278)]--,t[e(387)]&&(s[e(257)]-=r)),(this[e(221)]===e(211)||this[e(221)]===e(292)||this[e(221)]===e(201))&&(s.left+=h,s[e(283)]<=s[e(211)]&&s[e(211)]++,t[e(387)]&&(s[e(283)]-=h)),(this[e(221)]===e(283)||this[e(221)]===e(380)||this[e(221)]===e(350))&&(s[e(283)]+=h,s[e(283)]<=s[e(211)]&&s.right--,t.altKey&&(s[e(211)]-=h));else{const i=(0,a.n3)(this[e(184)]);let n;switch(s=(0,a.BN)(this[e(184)]),this[e(221)]){case e(292):n=(1/i*-h-r)/2,s[e(211)]-=Math[e(343)](n*i),s[e(257)]-=Math[e(343)](n),t[e(387)]&&(s.right+=Math.round(n*i),s.bottom+=Math[e(343)](n));break;case e(380):n=(h*(1/i)-r)/2,s.right+=Math.round(n*i),s.top-=Math[e(343)](n),t[e(387)]&&(s.left-=Math[e(343)](n*i),s[e(278)]+=Math[e(343)](n));break;case e(201):n=(1/i*-h+r)/2,s.left-=Math[e(343)](n*i),s[e(278)]+=Math[e(343)](n),t.altKey&&(s.right+=Math[e(343)](n*i),s[e(257)]-=Math[e(343)](n));break;case"bottomright":n=(h*(1/i)+r)/2,s[e(283)]+=Math[e(343)](n*i),s[e(278)]+=Math[e(343)](n),t[e(387)]&&(s[e(211)]-=Math[e(343)](n*i),s.top-=Math.round(n))}}this.rectLayer[e(182)][e(288)]=(0,a.FJ)(s);break}}this[e(289)](),this[e(188)][e(218)]()}[i(353)](t,e){const s=i;this._renderer&&!e&&this[s(326)](this[s(397)][s(282)](t))}[i(316)](t,e){const s=i;if(!(e&&this[s(188)]&&this._rectangleOrigin&&this[s(391)]&&this[s(221)]===s(274)))return;let h=this[s(396)][0]-this[s(391)][0],r=this[s(396)][1]-this._rectangleOtherPoint[1];t[s(330)]&&(Math[s(347)](h)>Math[s(347)](r)?h=r*(Math[s(357)](h)!==Math.sign(r)?-1:1):r=h*(Math.sign(h)!==Math.sign(r)?-1:1));const n=t.altKey?[this[s(396)][0]+h,this[s(396)][1]+r]:this[s(396)];this.rectLayer[s(182)].range=this[s(297)](n,[this._rectangleOrigin[0]-h,this[s(396)][1]-r]),this._refreshInfo(),this[s(188)][s(218)]()}[i(378)](){const t=i;if(!this.rectLayer)return;const e=this._sc[t(183)].primary[t(191)],s=this[t(372)].paletteService.secondary[t(191)];(0,h.WC)(this.rectLayer.currentState[t(284)],e)&&(0,h.WC)(this[t(188)][t(182)][t(219)],s)||(this.rectLayer.currentState.primaryColor=e,this[t(188)][t(182)][t(219)]=s,this[t(188)].step("Set Rectangle Color",!0),this.rectLayer[t(218)]())}[i(345)](){const t=i;switch(this[t(246)][t(271)]){case"Outline":return 1;case t(215):return 2;case"Fill and outline":return 3}}[i(187)](t){const e=i;switch(t){case 1:return e(304);case 2:return e(215);case 3:return"Fill and outline"}}[i(311)](){const t=i;this[t(188)]&&(this[t(253)][t(363)](this[t(188)][t(182)].blendMode),this._outlineSizeOption[t(363)](this[t(188)][t(182)][t(261)]),this[t(246)][t(363)](this[t(187)](this.rectLayer[t(182)][t(381)])),(!(0,h.WC)(this._sc[t(183)].primary[t(191)],this.rectLayer[t(182)].primaryColor)||!(0,h.WC)(this._sc.paletteService[t(349)].rgba,this.rectLayer[t(182)][t(219)]))&&this[t(372)][t(183)].setColors(this[t(188)][t(182)][t(284)],this[t(188)].currentState[t(219)]))}async[i(310)](){const t=i;await(this[t(188)]?.[t(294)]()),this[t(280)]()}_clearRectLayer(){const t=i;this[t(188)]=void 0,this._cursorOriginalRectangle=void 0,this[t(397)]?.[t(385)](!1),this[t(289)](),this[t(217)][t(369)]()}_createRange(t,e){return(0,a.tH)(t[0],t[1],e[0],e[1])}_refreshInfo(){const t=i;this._sizeInfo.range=this[t(188)]?.[t(182)][t(288)],this[t(393)][t(288)]=this[t(188)]?.currentState.range}_setState(t){const e=i;this.state!==t&&(this[e(221)]=t,this._onStateChange[e(369)]())}[i(194)](t){const e=i;return this[e(397)]=new(p[e(328)])(t,(()=>this.rectLayer?.currentState.range),!0,this._sc.viewportService,this[e(372)][e(375)]),this[e(397)][e(385)]("new"!==this[e(221)]),[this[e(397)],new l.d(t,this[e(372)][e(375)],this._sc[e(335)],this[e(336)])]}[i(213)](){const t=i;return{state:this.state,hasRectLayer:!!this[t(188)]}}[i(327)](t){const e=i;t.hasRectLayer?this[e(397)]?.setVisible(!0):this._clearRectLayer(),this[e(326)](t.state),this[e(311)](),this[e(289)]()}}const _=g;class y{constructor(t){this[i(185)]=t}get[i(288)](){const t=i;return this[t(185)]()?.[t(182)][t(288)]}}class v extends d.q{constructor(){const t=i;super(...arguments),this[t(254)]=t(354)}get[i(288)](){return this[i(286)]}set[i(288)](t){const e=i;this[e(286)]=t,this[e(389)][e(369)]()}get[i(195)](){return!!this[i(286)]}[i(244)](){const t=i;if(!this[t(286)])return"";const e=(0,a.Oq)(this[t(286)]),s=(0,a.rY)(this[t(286)]);return e+t(252)+s}[i(338)](){const t=i;if(!this._range)return"";const e=(0,a.Oq)(this[t(286)]),s=(0,a.rY)(this[t(286)]);return"Rectangle size is "+e+t(339)+s+t(302)}}class f extends d.q{constructor(){const t=i;super(...arguments),this[t(254)]=t(292)}get range(){return this._range}set[i(288)](t){const e=i;this[e(286)]=t,this._onUpdate[e(369)]()}get visible(){return!!this[i(286)]}[i(244)](){const t=i;return this[t(286)]?this[t(286)].left+", "+this[t(286)][t(257)]:""}[i(338)](){const t=i;return this[t(286)]?t(344)+this[t(286)][t(211)]+t(226)+this._range[t(257)]:""}}},1674:(t,e,s)=>{s.d(e,{q:()=>i});const i="http://www.w3.org/2000/svg"}}]);