"use strict";const a5_0x21df=["4kNpROi","37529uChNxt","textAlign","abs","getImageData","1xZSUfd","update",")->(","data","round","split"," x ","pow","1vXHiTL",'Range "',"textBaseline","getContext","fillStyle","565169UubMQk"," bold","Could not attain 2d context","px ","left","ceil",'" and "',"targetImage","fillText","top","selection","right","isInteger","max","webpackChunkluna","alignment","middle",'" dimensions are equal',"sqrt","990091zbKvUc","334037ftTIoB","height"," italic","length","push","floor"," must be contained within ","dimensions","106913CdrEvS","width","verticalAlignment","bottom","replace","measureText","primaryColor",'Invalid dimensions for image "',"rgba(","1247302ytHqqK","reduce","fontSize",'Images "',"subarray","buffer","isBold",'": ',"1026043OLbDjn","min","set","center","fontFamily"],a5_0x9e7e=function(t,e){return a5_0x21df[t-=323]},a5_0x41909f=a5_0x9e7e;!function(t,e){const n=a5_0x9e7e;for(;;)try{if(795093===parseInt(n(340))+-parseInt(n(348))*-parseInt(n(358))+-parseInt(n(331))+-parseInt(n(390))+-parseInt(n(353))*parseInt(n(354))+-parseInt(n(371))+-parseInt(n(366))*-parseInt(n(323)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a5_0x21df),(self[a5_0x41909f(385)]=self[a5_0x41909f(385)]||[]).push([[919],{919:(t,e,n)=>{n.r(e),n.d(e,{run:()=>s});var r=n(371),o=n(517),a=n(939),i=n(3),f=n(742);const s=async(t,e,n)=>{const s=a5_0x9e7e;return(0,f.ap)(n,s(378)),function(t,e){const n=a5_0x9e7e,f=e[n(378)].width,s=e[n(378)][n(324)],c={...e[n(330)]};if(c[n(375)]=Math.floor(c.left),c[n(382)]=Math[n(376)](c[n(382)]),c[n(380)]=Math[n(328)](c[n(380)]),c[n(334)]=Math[n(376)](c[n(334)]),c[n(375)]=(0,a.u)(Math[n(328)](c[n(375)]),f,0),c[n(382)]=(0,a.u)(Math[n(376)](c[n(382)]),f,0),c.top=(0,a.u)(Math[n(376)](c.top),s,0),c[n(334)]=(0,a.u)(Math.ceil(c[n(334)]),s,0),e.selection&&(e[n(381)][n(375)]>c.left&&(c[n(375)]=Math[n(349)](e[n(381)][n(375)],c[n(382)])),e.selection[n(382)]<c[n(382)]&&(c.right=Math.max(e[n(381)][n(382)],c[n(375)])),e.selection.top>c.top&&(c[n(380)]=Math[n(349)](e[n(381)][n(380)],c[n(334)])),e[n(381)][n(334)]<c.bottom&&(c.bottom=Math[n(384)](e.selection.bottom,c.top))),c[n(375)]===c[n(382)]||c.top===c[n(334)])throw new Error("The text can not be drawn outside of the selection and viewport");const h=(0,i.Oq)(c),l=(0,i.rY)(c),u=(0,i.Oq)(e[n(330)]),d=(0,i.rY)(e.dimensions),x=new OffscreenCanvas(h,l)[n(369)]("2d");if(!x)throw new Error(n(373));let M="";e[n(346)]&&(M+=n(372)),e.isItalic&&(M+=n(325)),M+=" "+e.fontSize+n(374)+e[n(352)],x.font=M.trim(),x[n(355)]="left",x[n(368)]=n(380),x[n(370)]=n(339)+e[n(337)][0]+","+e[n(337)][1]+","+e[n(337)][2]+","+e[n(337)][3]/255+")";const p=function(t,e,n){const r=a5_0x9e7e,o=[],a=e.split("\n");for(const e of a){const a=e[r(363)](" ");let i=a[0];for(let e=1;e<a[r(326)];e++){const f=a[e];t[r(336)](i+" "+f)[r(332)]<n?i+=" "+f:(o[r(327)]({text:i,width:t[r(336)](i).width}),i=f)}o[r(327)]({text:i,width:t[r(336)](i)[r(332)]})}return o}(x,e.text,u),w=e[n(342)];let m;switch(e[n(333)]){case"top":m=0;break;case n(387):m=Math[n(362)]((d-p[n(326)]*w)/2);break;case n(334):m=d-w*p[n(326)]}if(m+=e[n(330)][n(380)]-c.top,"justify"===e.alignment)for(const t of p){const r=t.text[n(363)](" ").map((t=>({text:t,width:x.measureText(t).width}))),o=(u-r[n(341)](((t,e)=>t+e[n(332)]),0))/(r[n(326)]-1);let a=e[n(330)][n(375)]-c[n(375)];for(const t of r)x[n(379)](t.text,Math.round(a),m),a+=t[n(332)]+o;m+=w}else for(const t of p){let r;switch(e[n(386)]){case"left":r=0;break;case n(351):r=u/2,x[n(355)]=n(351);break;case n(382):r=u,x[n(355)]="right"}r+=e.dimensions.left-c[n(375)],x[n(379)](t.text,r,m),m+=w}const g=x[n(357)](0,0,h,l),y=(0,r.X$)(f*s,f*s*4,!0),_=(0,r.X$)(f*s*2,Math[n(384)](f,s),!0);let b=0,A=0,I=0,U=0;for(I=0;I<l;I++)for(A=0;A<h;A++)U=4*(I*h+A),g[n(361)][U+3]>0&&(_[2*b]=A,_[2*b+1]=I,y[b++]=4*((c[n(380)]+I)*f+c[n(375)]+A));const v=y[n(344)](0,b);t[n(359)](.25);const B=new Uint8Array(new SharedArrayBuffer(4*y.length));for(U=0;U<y.length;U++)(0,r.Yr)(B,4*U,e[n(378)][n(361)],y[U]);if(t[n(359)](.5),e.blendMode===n(335))for(U=0;U<v[n(326)];U++)(0,r.Yr)(e[n(378)][n(361)],v[U],g[n(361)],4*(_[2*U+1]*h+_[2*U]));else for(U=0;U<v[n(326)];U++)(0,o.B)(e.blendMode,e[n(378)][n(361)],v[U],g[n(361)],4*(_[2*U+1]*h+_[2*U]));t[n(359)](.75);const k=new Uint8Array(new SharedArrayBuffer(4*y[n(326)]));for(U=0;U<y[n(326)];U++)(0,r.Yr)(k,4*U,e[n(378)][n(361)],y[U]);return t[n(359)](1),{undoData:{indexList:v,colorData:B},redoData:{indexList:v,colorData:k},range:c}}(e,n)}},742:(t,e,n)=>{n.d(e,{ap:()=>o,TO:()=>a,zg:()=>i});var r=n(3);function o(t,e){const n=a5_0x9e7e,r=t[e];if(r[n(332)]<1||r.height<1)throw new Error(n(338)+e+n(347)+r[n(332)]+n(364)+r[n(324)])}function a(t,e,n){const r=a5_0x9e7e,o=t[e],a=t[n];if(o[r(332)]===a[r(332)]&&o[r(324)]===a[r(324)])throw new Error(r(343)+e+r(377)+n+r(388))}function i(t,e,n){const o=a5_0x9e7e,a=t[e];if(!(0,r.ur)(n,a))throw new Error(o(367)+e+'" '+(0,r.PW)(a)+o(329)+(0,r.PW)(n))}},371:(t,e,n)=>{const r=a5_0x41909f;function o(t,e=2*t[r(326)]){const n=r;let o;if(t instanceof Float32Array)o=new Float32Array(e);else if(t instanceof Uint8Array)o=new Uint8Array(e);else if(t instanceof Uint16Array)o=new Uint16Array(e);else{if(!(t instanceof Uint32Array))throw new Error("Unrecognized array type");o=new Uint32Array(e)}return o[n(350)](t),o}function a(t,e,n=!1){const o=r;return e<Math[o(365)](2,8)?n?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):e<Math[o(365)](2,16)?n?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):n?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,e,n,r){t[e]=n[r],t[e+1]=n[r+1],t[e+2]=n[r+2],t[e+3]=n[r+3]}n.d(e,{Rs:()=>o,X$:()=>a,Yr:()=>i})},517:(t,e,n)=>{const r=a5_0x41909f;n.d(e,{B:()=>s});var o=n(371);const a=new Float32Array(6);let i;const f={normal:(t,e)=>e,darken:(t,e)=>Math[r(349)](t,e),multiply:(t,e)=>t*e,linearBurn:(t,e)=>Math.max(t+e-1,0),lighten:(t,e)=>Math[r(384)](t,e),screen:(t,e)=>1-(1-t)*(1-e),linearDodgeAdd:(t,e)=>Math[r(349)](t+e,1),overlay:(t,e)=>t<.5?2*t*e:1-2*(1-t)*(1-e),softLight:(t,e)=>e<.5?2*t*e+t*t*(1-2*e):Math[r(389)](t)*(2*e-1)+2*t*(1-e),difference:(t,e)=>Math[r(356)](t-e),exclusion:(t,e)=>t+e-2*t*e};function s(t,e,n,s,h,l=e,u=n){const d=r;if("replace"!==t){if(a[0]=s[h+3]/255,0===a[0])return e[n]=l[u],e[n+1]=l[u+1],e[n+2]=l[u+2],void(e[n+3]=l[u+3]);if(a[1]=l[u+3]/255,0===a[1])return e[n]=s[h],e[n+1]=s[h+1],e[n+2]=s[h+2],void(e[n+3]=s[h+3]);i=f[t],a[3]=i(l[u]/255,s[h]/255),a[4]=i(l[u+1]/255,s[h+1]/255),a[5]=i(l[u+2]/255,s[h+2]/255),a[2]=a[0]+a[1]*(1-a[0]),e[n]=Math[d(362)](c(l[u]/255,a[1],s[h]/255,a[0],a[3])/a[2]*255),e[n+1]=Math[d(362)](c(l[u+1]/255,a[1],s[h+1]/255,a[0],a[4])/a[2]*255),e[n+2]=Math[d(362)](c(l[u+2]/255,a[1],s[h+2]/255,a[0],a[5])/a[2]*255),e[n+3]=Math[d(362)](255*a[2])}else(0,o.Yr)(e,n,s,h)}function c(t,e,n,r,o){return(e-e*r)*t+(r-e*r)*n+e*r*o}},939:(t,e,n)=>{function r(t,e,n=0){const r=a5_0x9e7e;return Math[r(384)](Math[r(349)](t,e),n)}function o(t,e){const n=a5_0x9e7e,r=Math[n(365)](10,e);return Math[n(362)](t*r)/r}n.d(e,{u:()=>r,s:()=>o})},3:(t,e,n)=>{function r(t){const e=a5_0x9e7e;if(t)return{left:t[e(375)],top:t[e(380)],right:t[e(382)],bottom:t[e(334)]}}function o(t,e){return{left:t,top:e,right:t+1,bottom:e+1}}function a(t,e){return{left:0,top:0,right:t,bottom:e}}function i(t,e,n,r){const o=a5_0x9e7e,a=function(t){const e=a5_0x9e7e;if(t.left>t[e(382)]){const n=t[e(382)];t[e(382)]=t[e(375)],t[e(375)]=n}if(t[e(380)]>t[e(334)]){const n=t.bottom;t[e(334)]=t.top,t[e(380)]=n}if(t[e(382)]<t[e(375)]){const n=t[e(375)];t[e(375)]=t[e(382)],t[e(382)]=n}if(t[e(334)]<t[e(380)]){const n=t[e(380)];t[e(380)]=t[e(334)],t[e(334)]=n}return t}({left:t,top:e,right:n,bottom:r});return a[o(382)]++,a[o(334)]++,a}function f(t,e){const n=a5_0x9e7e;return t[n(375)]=Math[n(349)](Math.max(t.left,e[n(375)]),e[n(382)]),t[n(380)]=Math[n(349)](Math[n(384)](t[n(380)],e[n(380)]),e[n(334)]),t[n(382)]=Math[n(384)](Math[n(349)](t[n(382)],e.right),e.left),t[n(334)]=Math[n(384)](Math[n(349)](t[n(334)],e[n(334)]),e.top),t}function s(t){const e=a5_0x9e7e;return t[e(375)]=Math.floor(t[e(375)]),t[e(382)]=Math.ceil(t[e(382)]),t[e(380)]=Math.floor(t[e(380)]),t[e(334)]=Math[e(376)](t.bottom),t}function c(t,e,n){const r=a5_0x9e7e;if(function(t){const e=a5_0x9e7e;return t[e(375)]===t.right||t.top===t[e(334)]}(t))return t[r(375)]=e,t[r(382)]=e+1,t[r(380)]=n,void(t[r(334)]=n+1);t.left=Math[r(349)](t[r(375)],e),t.top=Math.min(t.top,n),t.right=Math.max(t[r(382)],e+1),t[r(334)]=Math.max(t[r(334)],n+1)}function h(t,e,n){const r=a5_0x9e7e;return e>=t.left&&e<t[r(382)]&&n>=t.top&&n<t[r(334)]}function l(t,e){const n=a5_0x9e7e;return e[n(375)]>=t.left&&e[n(382)]<=t[n(382)]&&e[n(380)]>=t[n(380)]&&e[n(334)]<=t[n(334)]}function u(t){const e=a5_0x9e7e;return"("+t[e(375)]+","+t[e(380)]+e(360)+t.right+","+t.bottom+")"}function d(t){return t[a5_0x9e7e(382)]-t.left}function x(t){const e=a5_0x9e7e;return t.bottom-t[e(380)]}n.d(e,{BN:()=>r,Re:()=>o,DI:()=>a,tH:()=>i,l$:()=>f,kq:()=>s,Hv:()=>c,RB:()=>h,ur:()=>l,PW:()=>u,Oq:()=>d,rY:()=>x})}}]);