"use strict";const a13_0x3ced=["Rectangle Selection","pointerDownMove","1iahpjn","commit","1OZcZeF","right","fitToWindow","203662olaTFK","_targetX","shiftKey","205410GXCmvi","pointerDown","71078OIKYLB","width","imageService","isSelectionTool","abs","sign","35854ZcaCxK","Crop","selectionService","keyUp","93943HYNYBF","altKey","8507MLOTXj","crop","bottom","validate","webpackChunkluna","560554lMpDPh","viewportService","range","1Khfpvb","keyDown","historyService","2AZaZXd","layer/cropToSelection","17YHwhot","_sc","_updateSelection","_originY","top","_originX","pointerUp","left","Deselect","_targetY","executeOnAllLayers","getCoordsFromEvent"],a13_0x3068=function(t,i){return a13_0x3ced[t-=401]},a13_0x5e9ac9=a13_0x3068;!function(t,i){const s=a13_0x3068;for(;;)try{if(143439===parseInt(s(433))+-parseInt(s(439))+parseInt(s(428))*-parseInt(s(404))+-parseInt(s(431))*parseInt(s(425))+parseInt(s(409))*parseInt(s(445))+-parseInt(s(443))*parseInt(s(407))+-parseInt(s(401))*-parseInt(s(423)))break;t.push(t.shift())}catch(i){t.push(t.shift())}}(a13_0x3ced),(self[a13_0x5e9ac9(449)]=self[a13_0x5e9ac9(449)]||[]).push([[3976],{3976:(t,i,s)=>{const e=a13_0x5e9ac9;s.r(i),s.d(i,{default:()=>c});var o=s(5120),h=s(2939),n=s(1003);class a extends o.JT{constructor(t){const i=a13_0x3068;super(),this._sc=t,this.id=i(446),this[i(436)]=!0,this._originX=0,this[i(412)]=0}[e(405)](t,i){this[e(411)](t,i)}[e(442)](t,i){this._updateSelection(t,i)}[e(432)](t){const i=e;(this[i(410)][i(441)][i(403)]||void 0!==this[i(429)]||void 0!==this[i(418)])&&(this[i(429)]=void 0,this[i(418)]=void 0,this[i(410)][i(441)].range=void 0),[this._originX,this[i(412)]]=this._sc.viewportService[i(420)](t)}async[e(415)](t,i){const s=e;if(i||void 0===this[s(429)]||void 0===this[s(418)]){this._sc[s(441)][s(403)]=void 0;const t=void 0===this[s(410)].selectionService[s(403)]?s(417):s(421);this._sc.selectionService[s(424)](t)}else this[s(411)](t,!1),this[s(410)][s(406)].createCompositeEntry(s(440),(async()=>{const t=s;await this[t(410)].taskService[t(419)](t(408),{selection:this[t(410)].selectionService[t(403)]}),this[t(410)][t(402)][t(427)]()}))}[e(422)](t){const i=e;[this[i(429)],this[i(418)]]=this[i(410)][i(402)][i(420)](t),this[i(411)](t,!0)}[e(411)](t,i){const s=e;if(!i||void 0===this[s(429)]||void 0===this._targetY)return;let o=this[s(429)]-this._originX,a=this._targetY-this[s(412)];t[s(430)]&&(Math[s(437)](o)>Math[s(437)](a)?o=a*(Math[s(438)](o)!==Math[s(438)](a)?-1:1):a=o*(Math.sign(o)!==Math[s(438)](a)?-1:1));const c=this._sc[s(435)][s(434)],r=this[s(410)][s(435)].height,p=(0,n.Pq)();a<0?(p[s(413)]=(0,h.u)(this[s(412)]+a,r),p[s(447)]=(0,h.u)(this[s(412)]+1+(t[s(444)]?-a:0),r)):(p.bottom=(0,h.u)(this[s(412)]+a+1,r),p[s(413)]=(0,h.u)(this[s(412)]+(t[s(444)]?-a:0),r)),o<0?(p.left=(0,h.u)(this._originX+o,c),p[s(426)]=(0,h.u)(this[s(414)]+1+(t[s(444)]?-o:0),c)):(p[s(426)]=(0,h.u)(this[s(414)]+o+1,c),p[s(416)]=(0,h.u)(this[s(414)]+(t[s(444)]?-o:0),c)),this._sc[s(441)][s(403)]=p,this._sc[s(441)][s(448)](c,r)}}const c=a}}]);