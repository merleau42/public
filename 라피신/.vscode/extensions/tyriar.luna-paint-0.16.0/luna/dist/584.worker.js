"use strict";const a7_0x6c10=['" dimensions are equal',"pow","push","524026wDDKWP","ceil",")->(","update","6719rehcfy","buffer","Unrecognized array type","134915zcCViX","floor",'" and "',"2212159bRUcgy","height","859365fXdaTh","sqrt","right","tolerance","round","set","max","blendMode","89AXODhO","subarray","43Oohiup","webpackChunkluna",'": '," x ","min","left","width","33wcIqIi","bottom","6130tvCuKK","replace","29154bEERTZ","isInteger",'" dimensions differ',"color","abs","top","length","1XHBRRO","targetImage"],a7_0x4aa2=function(t,n){return a7_0x6c10[t-=290]},a7_0x84d4d8=a7_0x4aa2;!function(t,n){const a=a7_0x4aa2;for(;;)try{if(523170===-parseInt(a(301))-parseInt(a(296))+-parseInt(a(322))*parseInt(a(318))+parseInt(a(334))*parseInt(a(329))+-parseInt(a(309))*parseInt(a(320))+parseInt(a(293))*parseInt(a(311))+parseInt(a(299)))break;t.push(t.shift())}catch(n){t.push(t.shift())}}(a7_0x6c10),(self[a7_0x84d4d8(312)]=self[a7_0x84d4d8(312)]||[])[a7_0x84d4d8(333)]([[584],{584:(t,n,a)=>{a.r(n),a.d(n,{run:()=>c});var r=a(371),e=a(3),o=a(742),i=a(517);const c=async(t,n,a)=>{const c=a7_0x4aa2;(0,o.ap)(a,c(330));const u=a[c(330)].data,h=a[c(330)].width,d=a.targetImage[c(300)],l=a.x,x=a.y,p=4*(x*h+l),w=u.subarray(p,p+4),y=a[c(304)]*a.tolerance*4,m=(0,r.X$)(h*d*2,Math[c(307)](h,d));let M=0;m[M++]=l,m[M++]=x;const g=new Uint8Array(h*d);g[x*h+l]=1;const _=(0,r.X$)(h*d,h*d*4,!0);let A=0;const b=(0,e.Re)(l,x),I=(0,e.DI)(h,d),B=a.selection||I;let R=0,U=0,v=0,D=0;for(;M>0;)U=m[--M],R=m[--M],v=U*h+R,D=4*v,X=u,E=D,O=w,((k=y)>0?(s[0]=O[0]-X[E],s[1]=O[1]-X[E+1],s[2]=O[2]-X[E+2],s[3]=O[3]-X[E+3],s[4]=(1+s[0]*s[0])*O[3]/256+(1+s[1]*s[1])*O[3]/256+(1+s[2]*s[2])*O[3]/256+s[3]*s[3],s[4]<=k):X[E]===O[0]&&X[E+1]===O[1]&&X[E+2]===O[2]&&X[E+3]===O[3])&&(_[A++]=D,(0,e.Hv)(b,R,U),(0,e.RB)(I,R+1,U)&&0===g[v+1]&&((0,e.RB)(B,R+1,U)&&(m[M++]=R+1,m[M++]=U),g[v+1]=1),(0,e.RB)(I,R-1,U)&&0===g[v-1]&&((0,e.RB)(B,R-1,U)&&(m[M++]=R-1,m[M++]=U),g[v-1]=1),(0,e.RB)(I,R,U+1)&&0===g[v+h]&&((0,e.RB)(B,R,U+1)&&(m[M++]=R,m[M++]=U+1),g[v+h]=1),(0,e.RB)(I,R,U-1)&&0===g[v-h]&&((0,e.RB)(B,R,U-1)&&(m[M++]=R,m[M++]=U-1),g[v-h]=1));var X,E,O,k;const q=_[c(310)](0,A);n[c(292)](.25);const C=f(u,q);n[c(292)](.5),function(t,n,a,r){const e=a7_0x4aa2;let o=0;for(let c=0;c<n[e(328)];c++)o=n[c],(0,i.B)(r,t,o,a,0)}(u,q,a[c(325)],a[c(308)]),n.update(.75);const H=f(u,q);return n[c(292)](1),{indexList:q,undoColorData:C,redoColorData:H,range:b}},s=new Int32Array(5);function f(t,n){const a=a7_0x4aa2,r=new Uint8Array(new SharedArrayBuffer(4*n[a(328)]));for(let e=0;e<n[a(328)];e++)r[4*e]=t[n[e]],r[4*e+1]=t[n[e]+1],r[4*e+2]=t[n[e]+2],r[4*e+3]=t[n[e]+3];return r}},742:(t,n,a)=>{a.d(n,{ap:()=>e,TO:()=>o,zg:()=>i});var r=a(3);function e(t,n){const a=a7_0x4aa2,r=t[n];if(r[a(317)]<1||r[a(300)]<1)throw new Error('Invalid dimensions for image "'+n+a(313)+r[a(317)]+a(314)+r[a(300)])}function o(t,n,a){const r=a7_0x4aa2,e=t[n],o=t[a];if(e[r(317)]===o[r(317)]&&e[r(300)]===o.height)throw new Error('Images "'+n+'" and "'+a+r(331))}function i(t,n,a){const e=t[n];if(!(0,r.ur)(a,e))throw new Error('Range "'+n+'" '+(0,r.PW)(e)+" must be contained within "+(0,r.PW)(a))}},371:(t,n,a)=>{const r=a7_0x84d4d8;function e(t,n=2*t[r(328)]){const a=r;let e;if(t instanceof Float32Array)e=new Float32Array(n);else if(t instanceof Uint8Array)e=new Uint8Array(n);else if(t instanceof Uint16Array)e=new Uint16Array(n);else{if(!(t instanceof Uint32Array))throw new Error(a(295));e=new Uint32Array(n)}return e[a(306)](t),e}function o(t,n,a=!1){const e=r;return n<Math[e(332)](2,8)?a?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math[e(332)](2,16)?a?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):a?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,n,a,r){t[n]=a[r],t[n+1]=a[r+1],t[n+2]=a[r+2],t[n+3]=a[r+3]}a.d(n,{Rs:()=>e,X$:()=>o,Yr:()=>i})},517:(t,n,a)=>{const r=a7_0x84d4d8;a.d(n,{B:()=>s});var e=a(371);const o=new Float32Array(6);let i;const c={normal:(t,n)=>n,darken:(t,n)=>Math[r(315)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[r(307)](t+n-1,0),lighten:(t,n)=>Math[r(307)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[r(315)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[r(302)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[r(326)](t-n),exclusion:(t,n)=>t+n-2*t*n};function s(t,n,a,s,u,h=n,d=a){const l=r;if(t!==l(321)){if(o[0]=s[u+3]/255,0===o[0])return n[a]=h[d],n[a+1]=h[d+1],n[a+2]=h[d+2],void(n[a+3]=h[d+3]);if(o[1]=h[d+3]/255,0===o[1])return n[a]=s[u],n[a+1]=s[u+1],n[a+2]=s[u+2],void(n[a+3]=s[u+3]);i=c[t],o[3]=i(h[d]/255,s[u]/255),o[4]=i(h[d+1]/255,s[u+1]/255),o[5]=i(h[d+2]/255,s[u+2]/255),o[2]=o[0]+o[1]*(1-o[0]),n[a]=Math[l(305)](f(h[d]/255,o[1],s[u]/255,o[0],o[3])/o[2]*255),n[a+1]=Math[l(305)](f(h[d+1]/255,o[1],s[u+1]/255,o[0],o[4])/o[2]*255),n[a+2]=Math.round(f(h[d+2]/255,o[1],s[u+2]/255,o[0],o[5])/o[2]*255),n[a+3]=Math[l(305)](255*o[2])}else(0,e.Yr)(n,a,s,u)}function f(t,n,a,r,e){return(n-n*r)*t+(r-n*r)*a+n*r*e}},3:(t,n,a)=>{function r(t){const n=a7_0x4aa2;if(t)return{left:t[n(316)],top:t.top,right:t[n(303)],bottom:t[n(319)]}}function e(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function o(t,n){return{left:0,top:0,right:t,bottom:n}}function i(t,n,a,r){const e=a7_0x4aa2,o=function(t){const n=a7_0x4aa2;if(t[n(316)]>t.right){const a=t[n(303)];t[n(303)]=t[n(316)],t[n(316)]=a}if(t[n(327)]>t[n(319)]){const a=t.bottom;t[n(319)]=t[n(327)],t[n(327)]=a}if(t[n(303)]<t.left){const a=t.left;t.left=t[n(303)],t.right=a}if(t.bottom<t[n(327)]){const a=t[n(327)];t[n(327)]=t[n(319)],t[n(319)]=a}return t}({left:t,top:n,right:a,bottom:r});return o[e(303)]++,o[e(319)]++,o}function c(t,n){const a=a7_0x4aa2;return t[a(316)]=Math[a(315)](Math[a(307)](t[a(316)],n[a(316)]),n[a(303)]),t.top=Math.min(Math[a(307)](t[a(327)],n[a(327)]),n.bottom),t.right=Math.max(Math[a(315)](t.right,n[a(303)]),n.left),t.bottom=Math[a(307)](Math[a(315)](t[a(319)],n.bottom),n[a(327)]),t}function s(t){const n=a7_0x4aa2;return t[n(316)]=Math[n(297)](t.left),t[n(303)]=Math[n(290)](t[n(303)]),t[n(327)]=Math[n(297)](t[n(327)]),t[n(319)]=Math[n(290)](t[n(319)]),t}function f(t,n,a){const r=a7_0x4aa2;if(function(t){const n=a7_0x4aa2;return t[n(316)]===t[n(303)]||t.top===t[n(319)]}(t))return t[r(316)]=n,t[r(303)]=n+1,t[r(327)]=a,void(t.bottom=a+1);t[r(316)]=Math.min(t[r(316)],n),t[r(327)]=Math.min(t[r(327)],a),t.right=Math.max(t[r(303)],n+1),t.bottom=Math[r(307)](t[r(319)],a+1)}function u(t,n,a){const r=a7_0x4aa2;return n>=t[r(316)]&&n<t[r(303)]&&a>=t[r(327)]&&a<t[r(319)]}function h(t,n){const a=a7_0x4aa2;return n[a(316)]>=t[a(316)]&&n[a(303)]<=t[a(303)]&&n.top>=t.top&&n[a(319)]<=t[a(319)]}function d(t){const n=a7_0x4aa2;return"("+t[n(316)]+","+t[n(327)]+n(291)+t[n(303)]+","+t[n(319)]+")"}function l(t){return t.right-t.left}function x(t){const n=a7_0x4aa2;return t.bottom-t[n(327)]}a.d(n,{BN:()=>r,Re:()=>e,DI:()=>o,tH:()=>i,l$:()=>c,kq:()=>s,Hv:()=>f,RB:()=>u,ur:()=>h,PW:()=>d,Oq:()=>l,rY:()=>x})}}]);