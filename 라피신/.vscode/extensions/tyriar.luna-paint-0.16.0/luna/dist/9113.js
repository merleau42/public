"use strict";const a23_0x1867=["_shapeOtherPoint","offsetX","screen","_onStateChange","onBeforeRunLayerTask","createDomRenderProgram","round","_elementContainer","replace","fill","_getRange","strokeWidth","bind","Diamond","altKey","onStateChange","1147031oHAMDM","_cursorCurrent","normal","unregisterTemporaryLayer","_refreshInfo","_container","size","Enable","metaKey","setValueFromHistoryChange","smoothing","includes","order","11aacvWF","shape","Outline Size","onHistoryAction","path","buttons","right","_rightTriangleTypeOption","set","_createRange","_updateColors","version","_sizeInfo","_viewportService","commit","_range","block","getOutlineSvgPath","step","pointerMove","triangle","svg","appendChild","max","outlineSize","Smoothing","ArrowLeft","rgba","setVisible","_imageService","Move Shape","Set Shape Type","bottom","_getTypeValue","clientHeight","linearDodgeAdd","_clearShapeLayer","none","getSnapSettingCoordsFromEvent","_topLeftInfo","webpackChunkluna","flipX","ArrowRight","getDetailedInfo","abs","setRange","_directionalMoveZones","min","_isXFlipping","var(--luna-focusColor)"," y="," pixels wide by ","toString","sign","onRequestRender","Fill","snapToPixelGrid","register","235137IOrKSK","configService","setColors","overlay","onHistoryUnset","position","value","config","Set Shape Style","lighten","_svgPath","_svgPath2","Style","serialize","shiftKey","_smoothingOption","Blend Mode","then","2060fmBija","currentLayer","_triangleTypeOption","append","pointerDown","transparent","ellipse","options","_getLayer","ArrowDown","_sc","linearBurn","fire","1.1","bottomright","Resize Shape","blendMode","_styleOption","Draw Shape","bottomleft","_shapeOrigin","677378ZVkkPT","_renderer","state","style","shapeLayer","onHistoryUpdateValue","deserialize","type","pointerUp","taskService","softLight","difference","hasShapeLayer","darken","_setState","_allowNewState","handleOptionUpdate","_blendModeOption","add","top","Set Shape Color","left","stroke","createElement","absolute","event","name","currentState","topleft","_cursorOriginalShape","viewportService","Set Shape Outline Size","boolean","Fill and outline","ArrowUp","get","rightTriangle","allowUnchecking","_getStyleString","_onRequestRender","display","createElementNS","_setupActiveTemporaryLayer","classList","move","_onHistoryUpdateValue","226caOZMp","2hXQgHI","flipY","_diamondTypeOption","clientWidth","_getStyleValue","3fCFape","Set Shape Blend Mode","secondary","122433bLOppz","Shift Shape","hasImage","multiply","triggerRequestRender"," pixels tall","taskWorkerService","onLayerChange","_typeOptions","_model","render","number","_directionalMoveElements","height","_updateShape","div","pointerDownMove","width","exclusion","_outlineSizeOption","getPointerState","zoom","push","primaryColor","visible","offsetY","info","keyDown","_onOptionsChange","paletteService","imageService","historyService","diamond","Outline","primary","new","topright","range","onUpdate","getInfo","secondaryColor","dispose","_updateType","string-combo","57243ejjnjK","_cursorOrigin","removeChild","_finish","Shape top left position is x=","key","_onUpdate","ctrlKey","278247GrigaQ","_isYFlipping","_value","setAttribute","_ellipseTypeOption","_outlineModel","selectionService","_svg","_isVisible"],a23_0x196e=function(t,s){return a23_0x1867[t-=313]},a23_0x527001=a23_0x196e;!function(t,s){const e=a23_0x196e;for(;;)try{if(684517===parseInt(e(549))*-parseInt(e(374))+parseInt(e(531))+parseInt(e(460))+-parseInt(e(375))*-parseInt(e(328))+parseInt(e(473))*-parseInt(e(427))+parseInt(e(380))*-parseInt(e(435))+-parseInt(e(383)))break;t.push(t.shift())}catch(s){t.push(t.shift())}}(a23_0x1867),(self[a23_0x527001(513)]=self[a23_0x527001(513)]||[])[a23_0x527001(405)]([[9113,504],{3315:(t,s,e)=>{const i=a23_0x527001;e.d(s,{d:()=>c});var h=e(5120),r=e(1003),n=e(1674);let o,a;class c extends h.JT{constructor(t,s,e,i){const h=a23_0x196e;super(),this._container=t,this[h(502)]=s,this[h(486)]=e,this[h(392)]=i,this[h(472)]=2,this[h(442)]=document.createElementNS(n.q,h(494)),this[h(442)][h(438)](h(484),h(320)),this._svg[h(331)][h(536)]=h(352),this[h(541)]=document[h(369)](n.q,h(477)),this[h(541)][h(331)].stroke=h(522),this[h(541)].style.fill=h(554),this._svgPath[h(331)][h(455)]="1",this[h(542)]=document[h(369)](n.q,h(477)),this._svgPath2[h(331)][h(350)]=h(522),this[h(542)].style[h(453)]=h(554),this[h(542)][h(331)][h(455)]="1",this[h(442)][h(552)](this[h(541)],this[h(542)]),this[h(465)].prepend(this[h(442)]),this[h(530)]({dispose:()=>this._container[h(429)](this[h(442)])})}async[i(393)](){const t=i,s=this[t(392)][t(420)],h=this._viewportService;if(!s)return void(this[t(442)][t(331)].display="none");if(this[t(442)].style[t(368)]=t(489),!this[t(502)][t(550)])return;if(o!==this[t(392)][t(474)]){let s;switch(o=this[t(392)][t(474)],o){case"diamond":s=e.e(727)[t(548)](e[t(456)](e,727));break;case"ellipse":s=e.e(8459)[t(548)](e[t(456)](e,8459));break;case"triangle":s=e.e(4012)[t(548)](e[t(456)](e,4012));break;case t(364):s=e.e(6243)[t(548)](e[t(456)](e,6243));break;default:s=void 0}a=s?new Promise((async t=>{t(new(await s).default)})):s}const n=await a,c=Math.round(this._container[t(378)]/2)-this[t(502)].width/2*h[t(404)]+h.x*h.zoom,p=Math[t(450)](this[t(465)][t(507)]/2)-this._imageService.height/2*h.zoom+h.y*h.zoom,l=(0,r.Oq)(s)*h[t(404)],g=(0,r.rY)(s)*h.zoom;this[t(442)][t(331)][t(349)]=c+s[t(349)]*h.zoom-2+"px",this[t(442)][t(331)][t(347)]=p+s[t(347)]*h[t(404)]-2+"px",this._svg.setAttribute(t(400),(l+5)[t(525)]()),this[t(442)].setAttribute(t(396),(g+5)[t(525)]()),this[t(541)][t(438)]("d","M2.5 2.5 h"+l+" v"+g+" h"+-l+" v"+-g),n?.[t(490)]?(this[t(542)].style[t(368)]=t(489),this._svgPath2[t(438)]("d",n.getOutlineSvgPath(l,g,this[t(392)].flipX,this._model[t(376)]))):this[t(542)].style[t(368)]=t(510)}}},9865:(t,s,e)=>{e.d(s,{q:()=>r});var i=e(1815),h=e(5120);class r extends h.JT{constructor(){const t=a23_0x196e;super(...arguments),this[t(433)]=this[t(530)](new i.v),this[t(421)]=this._onUpdate[t(353)]}}},9904:(t,s,e)=>{const i=a23_0x527001;e.d(s,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>p,X5:()=>l,qv:()=>g});var h=e(1815),r=e(5120),n=e(2939);class o extends r.JT{constructor(t,s,e,i=!0){const r=a23_0x196e;super(),this[r(354)]=t,this[r(385)]=s,this[r(437)]=e,this[r(365)]=i,this.type=r(360),this[r(373)]=this[r(530)](new h.v),this.onHistoryUpdateValue=this[r(373)][r(353)],this[r(433)]=this.register(new h.v),this[r(421)]=this[r(433)][r(353)]}get[i(537)](){return this[i(437)]}set[i(537)](t){const s=i;this[s(437)]=t,this[s(433)][s(319)](t)}[i(469)](t){const s=i;this[s(437)]=t,this[s(373)][s(319)](t)}}class a extends r.JT{constructor(t,s,e){const r=i;super(),this[r(354)]=t,this[r(314)]=s,this[r(437)]=e,this[r(335)]="string",this[r(373)]=this.register(new h.v),this[r(333)]=this[r(373)][r(353)],this[r(433)]=this.register(new h.v),this[r(421)]=this[r(433)][r(353)]}get value(){return this[i(437)]}set value(t){const s=i;this[s(437)]=t,this[s(433)][s(319)](t)}setValueFromHistoryChange(t){const s=i;this._value=t,this[s(373)][s(319)](t)}}class c extends r.JT{constructor(t,s,e){const r=i;super(),this[r(354)]=t,this[r(314)]=s,this[r(437)]=e,this.type=r(426),this[r(373)]=this[r(530)](new h.v),this[r(333)]=this._onHistoryUpdateValue[r(353)],this[r(433)]=this[r(530)](new h.v),this[r(421)]=this[r(433)][r(353)]}get[i(537)](){return this[i(437)]}set[i(537)](t){const s=i;this[s(437)]=t,this[s(433)][s(319)](t)}[i(469)](t){const s=i;this[s(437)]=t,this[s(373)][s(319)](t)}}class p extends a{constructor(){const t=i;super("Blend Mode",[t(462),t(452),t(341),"multiply",t(318),t(540),t(446),t(508),"overlay",t(338),t(339),t(401)],t(462))}}class l extends r.JT{constructor(t,s,e,r){const n=i;super(),this[n(354)]=t,this[n(437)]=s,this.min=e,this[n(496)]=r,this[n(335)]=n(394),this[n(373)]=this[n(530)](new h.v),this[n(333)]=this[n(373)][n(353)],this._onUpdate=this[n(530)](new h.v),this[n(421)]=this[n(433)][n(353)]}get[i(537)](){const t=i;return(0,n.u)(this[t(437)],this[t(496)],this[t(520)])}set[i(537)](t){const s=i;this._value=t,this._onUpdate[s(319)](t)}[i(469)](t){const s=i;this[s(437)]=t,this[s(373)][s(319)](t)}}class g extends l{constructor(t,s,e,h){const r=i;super(t,s,e,h),this[r(335)]=r(394)}get[i(537)](){const t=i;return(0,n.u)(this[t(437)],this[t(496)],this[t(520)])}set value(t){const s=i;this[s(437)]=Math.floor(t),this[s(433)][s(319)](t)}}},504:(t,s,e)=>{const i=a23_0x527001;e.r(s),e.d(s,{MoveImageRangeRenderer:()=>n});var h=e(5120),r=e(1003);class n extends h.JT{constructor(t,s,e,i,h){const n=a23_0x196e;super(),this._container=t,this[n(454)]=s,this[n(343)]=e,this[n(486)]=i,this[n(502)]=h,this.order=2,this[n(395)]=new Map,this[n(519)]=new Map,this[n(443)]=!0,this[n(451)]=document[n(351)](n(398));const o=[n(356),n(419),n(326),n(321),n(347),n(505),n(349),"right"];for(const t of o){const s=document.createElement(n(398));s[n(371)][n(346)]("move-handle",t),this[n(451)].appendChild(s),this[n(395)][n(481)](t,s),this[n(519)][n(481)](t,(0,r.Pq)())}this[n(465)][n(495)](this[n(451)]),this[n(530)]({dispose:()=>{const t=n;this[t(465)].removeChild(this[t(451)])}})}[i(501)](t){const s=i;t!==this[s(443)]&&(this._elementContainer.style[s(368)]=t?"":s(510),this[s(443)]=t)}[i(518)](t){}render(){const t=i,s=this[t(454)]();if(!s)return;const e=this._imageService[t(550)];if(!e)return;const h=this[t(486)],r=Math[t(450)](this[t(465)].clientWidth/2)-e.width/2*h[t(404)],n=Math[t(450)](this._container.clientHeight/2)-e[t(396)]/2*h[t(404)],o=r+(h.x+s[t(349)])*h[t(404)],a=n+(h.y+s[t(347)])*h[t(404)],c=r+(h.x+s.right)*h.zoom,p=n+(h.y+s[t(505)])*h[t(404)],l=Math[t(450)]((o+c)/2),g=Math.round((a+p)/2),u=10*window.devicePixelRatio,d={left:Math[t(520)](o+u,Math[t(496)](o,l-u)),top:Math[t(520)](a+u,Math.max(a,g-u)),right:Math[t(496)](c-u,Math[t(520)](c,l+u)),bottom:Math.max(p-u,Math[t(520)](p,g+u))},_={left:o-u,top:a-u,right:c+u,bottom:p+u},y=this._directionalMoveZones.get(t(356));y[t(349)]=_[t(349)],y.right=d[t(349)],y[t(347)]=_[t(347)],y.bottom=d[t(347)];const f=this[t(395)][t(363)](t(356));f[t(331)].left=o+"px",f[t(331)][t(347)]=a+"px";const m=this[t(519)][t(363)](t(419));m.left=d.right,m.right=_[t(479)],m[t(347)]=_[t(347)],m[t(505)]=d[t(347)];const v=this[t(395)][t(363)]("topright");v[t(331)][t(349)]=c+"px",v[t(331)].top=a+"px";const S=this[t(519)].get(t(326));S[t(349)]=_[t(349)],S.right=d.left,S.top=d[t(505)],S.bottom=_.bottom;const w=this._directionalMoveElements[t(363)](t(326));w[t(331)][t(349)]=o+"px",w.style.top=p+"px";const b=this[t(519)].get(t(321));b[t(349)]=d.right,b[t(479)]=_[t(479)],b.top=d[t(505)],b[t(505)]=_[t(505)];const x=this[t(395)].get(t(321));x[t(331)][t(349)]=c+"px",x[t(331)][t(347)]=p+"px";const M=this[t(519)].get("top");M[t(349)]=d[t(349)],M[t(479)]=d[t(479)],M[t(347)]=_[t(347)],M[t(505)]=d.top;const O=this[t(395)][t(363)](t(347));O[t(331)][t(349)]=l+"px",O[t(331)].top=a+"px";const L=this[t(519)][t(363)]("bottom");L[t(349)]=d[t(349)],L.right=d.right,L[t(347)]=d[t(505)],L[t(505)]=_.bottom;const C=this[t(395)][t(363)](t(505));C.style[t(349)]=l+"px",C.style[t(347)]=p+"px";const T=this._directionalMoveZones[t(363)](t(349));T[t(349)]=_[t(349)],T[t(479)]=d[t(349)],T[t(347)]=d.top,T[t(505)]=d[t(505)];const k=this[t(395)].get(t(349));k[t(331)][t(349)]=o+"px",k[t(331)][t(347)]=g+"px";const I=this[t(519)][t(363)]("right");I[t(349)]=d[t(479)],I[t(479)]=_.right,I[t(347)]=d.top,I.bottom=d.bottom;const R=this[t(395)].get(t(479));R.style[t(349)]=c+"px",R[t(331)][t(347)]=g+"px"}[i(403)](t){const s=i;if(!this[s(454)]())return this[s(343)]?"new":"move";for(const[e,i]of this[s(519)])if((0,r.RB)(i,t[s(445)],t[s(408)]))return e;const e=this._directionalMoveZones.get(s(356)),h=this[s(519)][s(363)](s(321)),n={left:e.left,top:e.top,right:h[s(479)],bottom:h[s(505)]};return(0,r.RB)(n,t[s(445)],t[s(408)])?"move":this._allowNewState?"new":s(372)}}},9113:(t,s,e)=>{const i=a23_0x527001;e.r(s),e.d(s,{default:()=>y});var h=e(8752),r=e(1815),n=e(5120),o=e(2939),a=e(7896),c=e(1003),p=e(3670),l=e(3315),g=e(9865),u=e(9904),d=e(504);class _ extends n.JT{constructor(t){const s=a23_0x196e;super(),this[s(317)]=t,this.id=s(474),this[s(330)]=s(418),this._outlineModel=new f((()=>this.shapeLayer)),this[s(439)]=new u.FV("Ellipse",!0,!0,!1),this._triangleTypeOption=new u.FV("Triangle",!0,!1,!1),this._rightTriangleTypeOption=new u.FV("Right-angle Triangle",!0,!1,!1),this[s(377)]=new u.FV(s(457),!0,!1),this[s(345)]=new u.Jp,this._smoothingOption=new u.FV(s(498),!0,!0),this[s(324)]=new u.rP(s(543),[s(416),s(528),"Fill and outline"],s(416)),this[s(402)]=new u.qv(s(475),1,1,1e3),this[s(391)]=[this._ellipseTypeOption,this[s(551)],this[s(480)],this[s(377)]],this[s(314)]=[...this[s(391)],this[s(345)],this._styleOption,this[s(546)],this[s(402)]],this[s(485)]=new m,this[s(512)]=new v,this[s(409)]=[this[s(512)],this[s(485)]],this[s(367)]=this[s(530)](new r.v),this[s(527)]=this._onRequestRender[s(353)],this[s(447)]=this.register(new r.v),this[s(459)]=this[s(447)][s(353)],this.register(this[s(317)][s(412)][s(421)]((()=>this[s(483)]()))),this[s(530)](this[s(324)].onUpdate((t=>this[s(332)]?.[s(344)](this[s(379)](),s(331),s(539))))),this[s(530)](this[s(546)][s(421)]((t=>this[s(332)]?.handleOptionUpdate(t,s(470),(t?s(467):"Disable")+" Shape Smoothing")))),this[s(530)](this[s(402)][s(421)]((t=>this[s(332)]?.[s(344)](t,s(497),s(359),!0)))),this[s(530)](this._blendModeOption.onUpdate((t=>this[s(332)]?.[s(344)](t,"blendMode",s(381)))));for(const t of this[s(391)])this.register(t.onUpdate((()=>this[s(425)](t))));this.register(this[s(317)].imageService[s(390)]((()=>this._finish()))),this[s(530)](this[s(317)][s(337)][s(448)]((()=>this[s(430)]()))),this[s(530)]({dispose:()=>this[s(430)]()}),this.register(this[s(317)].imageService.onTemporaryLayerRegistered((t=>this[s(370)](t)))),this[s(317)][s(413)][s(550)]?.temporaryLayer&&this[s(370)](this[s(317)][s(413)].currentLayer.temporaryLayer)}[i(370)](t){const s=i;"shape"===t[s(335)]&&(this[s(332)]=t,this[s(530)](this[s(332)].onCommit((()=>this._clearShapeLayer()))),this[s(530)](this.shapeLayer[s(476)]((()=>{const t=s;this[t(411)](),this[t(464)]()}))),this.register(this.shapeLayer[s(535)]((()=>this[s(509)]()))),this[s(327)]=[this.shapeLayer[s(355)].range[s(349)],this[s(332)][s(355)][s(420)][s(347)]],this[s(444)]=[this[s(332)][s(355)][s(420)].right,this[s(332)].currentState[s(420)][s(505)]],this[s(329)]?.[s(501)](!0),this[s(367)][s(319)]())}[i(410)](t,s){const e=i;if(this[e(397)](t,s),this.shapeLayer&&!s&&[e(362),e(499),e(316),e(515)][e(471)](t[e(432)])){const s=(0,c.BN)(this[e(332)].currentState[e(420)]),i=(a.V5?t[e(468)]:t[e(434)])?10:1;switch(t[e(432)]){case e(362):(0,c.Hd)(s,s[e(349)],s[e(347)]-i);break;case e(316):(0,c.Hd)(s,s[e(349)],s[e(347)]+i);break;case e(499):(0,c.Hd)(s,s[e(349)]-i,s[e(347)]);break;case e(515):(0,c.Hd)(s,s[e(349)]+i,s[e(347)])}this[e(332)][e(355)].range=s,this[e(332)][e(491)](e(384))}}keyUp(t,s){this[i(397)](t,s)}async[i(553)](t){const s=i,e=this[s(317)][s(413)][s(550)];if(!e)return;const h=!(1&t[s(478)]),r=this[s(317)][s(358)].getSnapSettingCoordsFromEvent(t,this[s(546)][s(537)]);if(this[s(428)]=r,this[s(461)]=r,!r)return;if(this[s(436)]=!1,this[s(521)]=!1,"new"!==this[s(330)])return this[s(357)]=(0,c.BN)(this[s(332)]?.[s(355)].range),void(this[s(357)]&&((this.state===s(347)||"topleft"===this[s(330)]||this[s(330)]===s(419))&&(this._cursorOrigin[1]=this._cursorOriginalShape[s(347)]),("bottom"===this[s(330)]||this[s(330)]===s(326)||this[s(330)]===s(321))&&(this[s(428)][1]=this._cursorOriginalShape[s(505)]-1),(this[s(330)]===s(349)||this[s(330)]===s(356)||this[s(330)]===s(326))&&(this[s(428)][0]=this[s(357)].left),(this.state===s(479)||"topright"===this.state||this[s(330)]===s(321))&&(this[s(428)][0]=this[s(357)][s(479)]-1)));await this._finish(),this[s(327)]=r,this._shapeOtherPoint=r;const n=this[s(482)](this[s(327)],this._shapeOtherPoint),o=this[s(506)]();this[s(357)]=(0,c.BN)(n),this[s(332)]=new p.n(e,{invertColors:h},{type:o,range:n,primaryColor:this[s(317)][s(412)][s(417)][s(500)],secondaryColor:this[s(317)][s(412)][s(382)][s(500)],blendMode:this[s(345)][s(537)],outlineSize:this[s(402)].value,style:this[s(379)](),smoothing:this._smoothingOption[s(537)],flipX:!1,flipY:!1},this._sc[s(414)],this[s(317)][s(441)],this._sc[s(389)]),this._refreshInfo(),await e.registerTemporaryLayer(this[s(332)]),this[s(329)]?.[s(501)](!1),this[s(332)][s(387)]()}[i(336)](t,s){const e=i;if("new"===this.state&&(s||this[e(461)]?.[0]===this._cursorOrigin?.[0]&&this[e(461)]?.[1]===this[e(428)]?.[1]))return this[e(332)]&&this._sc[e(413)][e(550)]?.[e(463)](this[e(332)]),this[e(332)]?.[e(424)](),void this[e(509)]();if(this[e(332)]){let t;switch(this[e(330)]){case e(418):t=e(325);break;case e(372):t=e(503);break;case e(356):case e(419):case e(326):case e(321):case e(347):case e(349):case e(479):case e(505):t=e(322)}this[e(332)][e(491)](t)}this[e(329)]?.[e(501)](!0),this[e(492)](t,!1)}[i(399)](t){const s=i;if(!(this._shapeOrigin&&this[s(444)]&&this._cursorOrigin&&this._cursorOriginalShape))return;if(!this._sc[s(413)][s(550)])return;const e=this[s(317)][s(358)][s(511)](t,this[s(546)][s(537)]);if(this[s(461)]&&e[0]===this._cursorCurrent[0]&&e[1]===this._cursorCurrent[1])return;if(this[s(461)]=e,!this.shapeLayer)return;const h=this[s(461)][0]-this._cursorOrigin[0],r=this[s(461)][1]-this[s(428)][1];switch(this[s(330)]){case s(418):return this._shapeOtherPoint=e,void this[s(397)](t,!0);case s(372):{const t=(0,c.BN)(this[s(357)]);t.left+=h,t[s(347)]+=r,t[s(479)]+=h,t.bottom+=r,(0,c.FJ)(t),this[s(332)][s(355)][s(420)]=t;break}default:{let e;if(!t[s(545)]||this.state!==s(356)&&this[s(330)]!==s(419)&&"bottomleft"!==this[s(330)]&&this.state!==s(321))e=(0,c.BN)(this[s(357)]),(this[s(330)]===s(347)||this.state===s(356)||this[s(330)]===s(419))&&(e[s(347)]+=r,e[s(505)]<=e[s(347)]&&e[s(347)]++,t.altKey&&(e.bottom-=r)),("bottom"===this[s(330)]||this[s(330)]===s(326)||"bottomright"===this[s(330)])&&(e[s(505)]+=r,e[s(505)]<=e[s(347)]&&e[s(505)]--,t[s(458)]&&(e[s(347)]-=r)),(this.state===s(349)||"topleft"===this[s(330)]||"bottomleft"===this[s(330)])&&(e[s(349)]+=h,e[s(479)]<=e.left&&e.left++,t[s(458)]&&(e[s(479)]-=h)),(this.state===s(479)||this[s(330)]===s(419)||this[s(330)]===s(321))&&(e[s(479)]+=h,e[s(479)]<=e.left&&e[s(479)]--,t[s(458)]&&(e[s(349)]-=h));else{const i=(0,c.n3)(this[s(357)]);let n;switch(e=(0,c.BN)(this[s(357)]),this[s(330)]){case"topleft":n=(1/i*-h-r)/2,e[s(349)]-=n*i,e[s(347)]-=n,t[s(458)]&&(e[s(479)]+=n*i,e[s(505)]+=n);break;case s(419):n=(h*(1/i)-r)/2,e.right+=n*i,e[s(347)]-=n,t[s(458)]&&(e[s(349)]-=n*i,e[s(505)]+=n);break;case s(326):n=(1/i*-h+r)/2,e.left-=n*i,e[s(505)]+=n,t[s(458)]&&(e[s(479)]+=n*i,e[s(347)]-=n);break;case s(321):n=(h*(1/i)+r)/2,e[s(479)]+=n*i,e[s(505)]+=n,t.altKey&&(e[s(349)]-=n*i,e[s(347)]-=n)}}(!this[s(546)].value||this[s(317)][s(532)][s(538)][s(529)])&&(e[s(349)]=Math[s(450)](e[s(349)]),e[s(347)]=Math[s(450)](e[s(347)]),e[s(479)]=Math[s(450)](e[s(479)]),e[s(505)]=Math[s(450)](e[s(505)]));const i=this._isXFlipping;this[s(521)]=this[s(357)][s(479)]<=this[s(357)][s(349)]!=e[s(479)]<=e[s(349)],this[s(521)]!==i&&(this[s(332)][s(355)][s(514)]=!this[s(332)][s(355)][s(514)]);const n=this[s(436)];this[s(436)]=this[s(357)][s(505)]<=this[s(357)].top!=e[s(505)]<=e.top,this[s(436)]!==n&&(this[s(332)][s(355)][s(376)]=!this[s(332)].currentState[s(376)]),this[s(332)].currentState.range=(0,c.FJ)(e);break}}this._refreshInfo(),this[s(332)][s(387)]()}[i(492)](t,s){const e=i;this[e(329)]&&!s&&this[e(342)](this[e(329)][e(403)](t))}_updateShape(t,s){const e=i;if(!(s&&this.shapeLayer&&this[e(327)]&&this._shapeOtherPoint&&this[e(330)]===e(418)))return;let h=this[e(327)][0]-this[e(444)][0],r=this[e(327)][1]-this[e(444)][1];t.shiftKey&&(Math[e(517)](h)>Math[e(517)](r)?h=r*(Math[e(526)](h)!==Math.sign(r)?-1:1):r=h*(Math[e(526)](h)!==Math[e(526)](r)?-1:1));const n=t[e(458)]?[this._shapeOrigin[0]+h,this[e(327)][1]+r]:this[e(327)];this[e(332)][e(355)][e(420)]=this[e(482)](n,[this[e(327)][0]-h,this[e(327)][1]-r]),this[e(464)](),this[e(332)][e(387)]()}[i(483)](){const t=i;if(!this[t(332)])return;const s=this._sc.paletteService[t(417)][t(500)],e=this[t(317)][t(412)][t(382)][t(500)];(0,h.WC)(this.shapeLayer.currentState[t(406)],s)&&(0,h.WC)(this[t(332)].currentState[t(423)],e)||(this[t(332)][t(355)][t(406)]=s,this[t(332)][t(355)][t(423)]=e,this[t(332)][t(491)](t(348),!0),this.shapeLayer[t(387)]())}[i(379)](){const t=i;switch(this[t(324)][t(537)]){case t(416):return 1;case t(528):return 2;case t(361):return 3}}[i(366)](t){const s=i;switch(t){case 1:return s(416);case 2:return s(528);case 3:return s(361)}}async _updateType(t){const s=i;for(const e of this[s(391)])e!==t&&e[s(469)](!1);const e=this[s(506)]();this[s(332)]&&this.shapeLayer.currentState[s(335)]!==e&&(this[s(332)].currentState[s(335)]=e,this.shapeLayer[s(491)](s(504)),this.shapeLayer[s(387)]())}[i(506)](){const t=i;return this[t(377)][t(537)]?t(415):this[t(551)][t(537)]?t(493):this._rightTriangleTypeOption[t(537)]?"rightTriangle":t(313)}[i(411)](){const t=i;this[t(332)]&&(this._blendModeOption.setValueFromHistoryChange(this[t(332)][t(355)][t(323)]),this[t(402)][t(469)](this.shapeLayer.currentState.outlineSize),this[t(324)][t(469)](this[t(366)](this[t(332)][t(355)].style)),this[t(439)][t(469)](this[t(332)][t(355)][t(335)]===t(313)),this[t(551)][t(469)]("triangle"===this.shapeLayer[t(355)].type),this[t(480)][t(469)](this.shapeLayer[t(355)][t(335)]===t(364)),this[t(377)][t(469)](this[t(332)][t(355)].type===t(415)),this[t(546)][t(469)](this[t(332)][t(355)][t(470)]),(!(0,h.WC)(this[t(317)][t(412)].primary.rgba,this.shapeLayer[t(355)].primaryColor)||!(0,h.WC)(this._sc[t(412)][t(382)][t(500)],this[t(332)][t(355)].secondaryColor))&&this[t(317)][t(412)][t(533)](this[t(332)][t(355)][t(406)],this[t(332)][t(355)].secondaryColor))}async[i(430)](){const t=i;await(this.shapeLayer?.[t(487)]()),this[t(509)]()}[i(509)](){const t=i;this[t(332)]=void 0,this[t(357)]=void 0,this[t(329)]?.[t(501)](!1),this._refreshInfo(),this[t(367)][t(319)]()}[i(482)](t,s){return(0,c.tH)(t[0],t[1],s[0],s[1])}[i(464)](){const t=i;this._sizeInfo[t(420)]=this[t(332)]?.[t(355)][t(420)],this._topLeftInfo.range=this.shapeLayer?.[t(355)][t(420)]}[i(342)](t){const s=i;this[s(330)]!==t&&(this[s(330)]=t,this[s(447)][s(319)]())}[i(449)](t){const s=i;return this[s(329)]=new d.MoveImageRangeRenderer(t,(()=>this.shapeLayer?.currentState.range),!0,this._sc[s(358)],this[s(317)][s(413)]),this._renderer[s(501)]("new"!==this[s(330)]),[new l.d(t,this[s(317)][s(413)],this._sc[s(358)],this[s(440)]),this[s(329)]]}[i(544)](){const t=i;return{state:this[t(330)],hasShapeLayer:!!this[t(332)]}}[i(334)](t){const s=i;t[s(340)]?this._renderer?.[s(501)](!0):this[s(509)](),this[s(342)](t[s(330)]),this._onOptionsChange(),this[s(464)]()}}const y=_;class f{constructor(t){this[i(315)]=t}get[i(420)](){const t=i;return this[t(315)]()?.[t(355)].range}get[i(474)](){const t=i;return this[t(315)]()?.currentState[t(335)]}get[i(514)](){const t=i;return this[t(315)]()?.[t(355)].flipX}get[i(376)](){const t=i;return this._getLayer()?.currentState[t(376)]}}class m extends g.q{constructor(){const t=i;super(...arguments),this[t(335)]=t(466)}get[i(420)](){return this._range}set[i(420)](t){const s=i;this[s(488)]=t,this[s(433)][s(319)]()}get visible(){return!!this[i(488)]}[i(422)](){const t=i;return this[t(488)]?(0,o.s)((0,c.Oq)(this[t(488)]),2)+" x "+(0,o.s)((0,c.rY)(this[t(488)]),2):""}[i(516)](){const t=i;if(!this[t(488)])return"";const s=(0,o.s)((0,c.Oq)(this[t(488)]),2),e=(0,o.s)((0,c.rY)(this._range),2);return"Shape size is "+s+t(524)+e+t(388)}}class v extends g.q{constructor(){const t=i;super(...arguments),this[t(335)]="topleft"}get[i(420)](){return this._range}set[i(420)](t){const s=i;this[s(488)]=t,this._onUpdate[s(319)]()}get[i(407)](){return!!this._range}[i(422)](){const t=i;return this[t(488)]?(0,o.s)(this[t(488)].left,2)+", "+(0,o.s)(this[t(488)][t(347)],2):""}[i(516)](){const t=i;return this[t(488)]?t(431)+(0,o.s)(this._range.left,2)+t(523)+(0,o.s)(this._range[t(347)],2):""}}},1674:(t,s,e)=>{e.d(s,{q:()=>i});const i="http://www.w3.org/2000/svg"}}]);