<!DOCTYPE html>
<html data-server-no-reload>

<head>
	<title>네비게이터</title>
	<style>
		body {
			background-color: #1F1F1F;
			color: #E0E0E0;
		}

		.number-link {
			cursor: pointer;
			color: blue;
			text-decoration: underline;
		}
	</style>
	
	<script>
		var iframeMinimized = false;
		var html = document.querySelector("html");
		var body = document.querySelector("body");

		function toggleIframe() {
			var iframe = document.getElementById("myIframe");
			iframeMinimized = !iframeMinimized;

			if (iframeMinimized)
				iframe.style.display = "none";
			else
				iframe.style.display = "block";
		}

		function changeIframeSource(number) {
			var iframe = document.getElementById("myIframe");

			if (iframeMinimized) {
				toggleIframe();
			}
			iframe.src = "./BOJ/output/" + number + ".html";
			applyStylesToIframe();
		}
		
		function applyStylesToIframe() {
			var iframe = document.getElementById("myIframe");
			var innerDocument = iframe.contentDocument || iframe.contentWindow.document;
			innerDocument.body.style.backgroundColor = "#1F1F1F";

			[...innerDocument.querySelectorAll("td, th")]
				.forEach(x=>x.style="color:#E0E0E0; border-color:#909090");
			
			[...innerDocument.querySelectorAll(".mjx-copytext")]
				.forEach(x=>x.style.fontSize = "0"); //수식 표현시 종종 나타나는 찌꺼기 제거

			[...innerDocument.querySelectorAll("math")]
				.forEach(x=>x.style.color = "yellow"); //수식 태그 강조

			[...innerDocument.querySelectorAll("a")]
				.forEach(x=>x.style.color = "aqua"); //링크 가독성, 파랑 대신

			iframe.style.height = '0';
			iframe.style.height = innerDocument.body.scrollHeight*1.02+"px";
			iframe.style.border = "0";
			iframe.style.width = html.clientWidth*0.98+"px";

		}

		window.addEventListener("DOMContentLoaded", function() {
			var iframe = document.getElementById("myIframe");
			
			var numberLinks = document.querySelectorAll(".number-link");
			numberLinks.forEach(function(link) {
				link.onclick = function() {
					var number = link.innerText;
					changeIframeSource(number);
				};
			});

			iframe.onload = applyStylesToIframe;
			toggleIframe();
		});

		window.addEventListener("resize", applyStylesToIframe);
	</script>
</head>

<body data-server-no-reload>

	<div class="number-link" style="display:inline">2557</div>
	<div class="number-link" style="display:inline">1059</div>
	<div class="number-link" style="display:inline">1920</div>
	<div class="number-link" style="display:inline">9068</div>
	<div class="number-link" style="display:inline">18158</div>
	<div class="number-link" style="display:inline">13172</div>
	<div class="number-link" style="display:inline">23450</div>
	<div class="number-link" style="display:inline">10906</div>
	<div class="number-link" style="display:inline">22394</div>
	<div class="number-link" style="display:inline">2734</div>
	<div class="number-link" style="display:inline">21548</div>
	<div class="number-link" style="display:inline">1617</div>
	<div class="number-link" style="display:inline">24447</div>
	<div class="number-link" style="display:inline">20016</div>
	<div class="number-link" style="display:inline">17837</div>

	<button onclick="toggleIframe()" id="debug">Toggle iframe</button>
	<iframe src="about:blank" id="myIframe"></iframe>
</body>

</html>
