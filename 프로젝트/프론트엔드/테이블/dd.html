<html>
<head>
	<style>
		body {
			margin: 0;
			/* background-color: #202020; */
			background-color: ghostwhite;
		}
		table {
			max-height: 0;
			height: 100%;
			width: 100%;
			border: 1;
			border-collapse: collapse;
			
		}
		th {
			background-color: lightcyan;
			padding: 3px;
		}
		td {
			padding: 3px;
		}
		.Cell {
			height: 100%;
			width: 100%;
			border: 0;
			text-align: center;
			background-color: inherit;
			/* resize: none; */
			/* outline: none; */
		}
		</style>
	<script>
		color_preset = {
			'a1' : 'rgb(255, 192, 0)',	 'a2' : 'rgb(255, 255, 0)',	  'a3' : 'rgb(255, 255, 170)',
			'b1' : 'rgb(0, 204, 0)',	 'b2' : 'rgb(0, 255, 0)',	  'b3' : 'rgb(187, 255, 187)',
			'c1' : 'rgb(255, 136, 255)', 'c2' : 'rgb(136, 136, 255)', 'c3' : 'rgb(192, 192, 255)',
			'z' : 'rgb(192, 192, 192)', '':''
		};
		window.addEventListener('DOMContentLoaded',	main)
		function main()
		{
			exam = [['ㆅ가나',		'ㆅ12',			'',				'ㆅ4'],
			['ㆅaaa',		'ㆅ6',			'ㆅ7',			''],
			['ㅷa3ㆅ다라',	'ㅷb3ㆅ10',		'ㅷc3ㆅ11',		'ㆅ마바'],
			['ㅷa2ㆅ마바',	'ㅷb2ㆅ사',		'ㅷc2ㆅ자',		'ㆅㄱㄴㄷ'],
			['ㅷa1ㆅ보',	'ㅷb1ㆅ니',		'ㅷc1ㆅ쿠',		'ㅷzㆅ메롱']];

			body = document.body;
			table1 = vec_to_table(exam);
			body.appendChild(table1);

			assgin_event_once();
		}
		function swap_key_value(map)
		{
			return JSON.parse(`{${keys(map).map(x=>`"${map[x]}":"${x}"`).join(',')}}`);
		}
		function assgin_event_once()
		{
			;
		}
		function assgin_event_again()
		{

			;
		}
		function parse(category, keyword)
		{
			parsed = {};
			category = `\x00${category}\x7F`;
			keyword = `\x00${keyword}\x7F`;

			[...category]
			.map((x,i,a) => [keyword.indexOf(x), x])
			.toSorted((x,y) => x[0] - y[0])
			.forEach((x,i,a) => {if (i < a.length - 1) parsed[a[i][1]] = keyword.substring(a[i][0] + 1, a[i+1][0])});

			return parsed;
		}
		// 테이블 <==> 벡터 <==> 맵
		function vec_to_table(arr)
		{
			table = document.createElement('table');
			thead = document.createElement('thead');
			tbody = document.createElement('tbody');
			arr.forEach((row, i) => {
				tr = document.createElement('tr');
				row.forEach((col, j) => {
					parsed = parse('ㅷㆅ', col);
					td = i > 0 ? document.createElement('td') : document.createElement('th');
					input = document.createElement('input');
					input.className = "Cell";
					input.value = parsed['ㆅ'];
					bg = color_preset[parsed['ㅷ']];
					td.style.backgroundColor = i > 0 ? bg : '';
					td.setAttribute('row', i);
					td.setAttribute('col', j);
					td.appendChild(input);
					tr.appendChild(td);
				})
				i > 0 ? tbody.appendChild(tr) : thead.appendChild(tr)
			})
			table.appendChild(thead);
			table.appendChild(tbody);
			table.border = 1;
			return table;
		}
		function table_to_vec(table)
		{
			return [...table.querySelectorAll('tr')].map(tr =>{
				return [...tr.querySelectorAll('th, td')].map(td =>{
					bg = swap_key_value(color_preset)[td.style.backgroundColor];
					text = td.querySelector('input').value;
					bg = bg ? `ㅷ${bg}` : ''
					text = text ? `ㆅ${text}` : ''
					return bg + text;
				})
			})
		}
		// map['행,열'] = '셀정보' <===> vec[행][열] = '셀정보'
		function vec_to_map(arr, map={})
		{
			arr.forEach((row,i)=>{
				row.forEach((col,j)=>{
					map[`${i},${j}`] = col;
				})
			});
			return map;
		}
		function map_to_vec(map, arr=Array.from({length:10000}, x=>[]))
		{
			keys(map)
			.map(x => [...x.split(','), map[x]])
			.toSorted()
			.forEach(x => arr[x[0]].push(x[2]));
			return arr;
		}
		function table_to_map(table, map={})
		{
			return vec_to_map(table_to_vec(table), map);
		}
		function map_to_table(map)
		{
			return vec_to_table(map_to_vec(map));
		}
	</script>
</head>
<body>
</body>
</html>